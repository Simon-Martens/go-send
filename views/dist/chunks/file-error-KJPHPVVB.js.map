{
  "version": 3,
  "sources": ["../../src/ui/file-error.mjs"],
  "sourcesContent": ["import { translateElement } from \"../utils.mjs\";\n\n/**\n * <file-error-view> - Error/expired file screen\n *\n * Responsibilities:\n * - Display error icon and message for expired/not found files\n * - Show \"Send your own files\" button to navigate to upload page\n * - Support custom error messages\n */\nclass FileErrorElement extends HTMLElement {\n  constructor() {\n    super();\n\n    this._templateMounted = false;\n    this._postMountFrame = null;\n    this.errorMessage = null;\n  }\n\n  connectedCallback() {\n    // Mount template first (synchronous)\n    if (!this._templateMounted) {\n      const template = document.getElementById(\"file-error-view\");\n      if (!template) {\n        console.error(\"Template #file-error-view not found\");\n        return;\n      }\n\n      const content = template.content.cloneNode(true);\n      this.appendChild(content);\n      this._templateMounted = true;\n    }\n\n    if (this._postMountFrame !== null) {\n      cancelAnimationFrame(this._postMountFrame);\n    }\n\n    // Schedule async initialization\n    this._postMountFrame = requestAnimationFrame(() => {\n      this._postMountFrame = null;\n      if (!this.isConnected) {\n        return;\n      }\n\n      translateElement(this);\n      this.setupHandlers();\n\n      // Apply error message if set before mount\n      if (this.errorMessage) {\n        this.render();\n      }\n    });\n  }\n\n  disconnectedCallback() {\n    if (this._postMountFrame !== null) {\n      cancelAnimationFrame(this._postMountFrame);\n      this._postMountFrame = null;\n    }\n  }\n\n  setupHandlers() {\n    // Wire up \"Send your own files\" button\n    const homeBtn = this.querySelector('[data-action=\"home\"]');\n    if (homeBtn) {\n      homeBtn.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        window.location.assign(\"/\");\n      });\n    }\n  }\n\n  /**\n   * Public API: Set error message (optional, uses default if not provided)\n   */\n  setError(message) {\n    this.errorMessage = message;\n    this.render();\n  }\n\n  render() {\n    if (!this.errorMessage) {\n      return;\n    }\n\n    // Update custom description if provided\n    const descEl = this.querySelector('[data-role=\"custom-description\"]');\n    if (descEl) {\n      descEl.textContent = this.errorMessage;\n      descEl.classList.remove(\"hidden\");\n\n      // Hide default description\n      const defaultDesc = this.querySelector('[data-role=\"default-description\"]');\n      if (defaultDesc) {\n        defaultDesc.classList.add(\"hidden\");\n      }\n    }\n  }\n}\n\n// Register the custom element\ncustomElements.define(\"file-error-view\", FileErrorElement);\n"],
  "mappings": ";;;;;;AAUA,IAAM,mBAAN,cAA+B,YAAY;AAAA,EACzC,cAAc;AACZ,UAAM;AAEN,SAAK,mBAAmB;AACxB,SAAK,kBAAkB;AACvB,SAAK,eAAe;AAAA,EACtB;AAAA,EAEA,oBAAoB;AAElB,QAAI,CAAC,KAAK,kBAAkB;AAC1B,YAAM,WAAW,SAAS,eAAe,iBAAiB;AAC1D,UAAI,CAAC,UAAU;AACb,gBAAQ,MAAM,qCAAqC;AACnD;AAAA,MACF;AAEA,YAAM,UAAU,SAAS,QAAQ,UAAU,IAAI;AAC/C,WAAK,YAAY,OAAO;AACxB,WAAK,mBAAmB;AAAA,IAC1B;AAEA,QAAI,KAAK,oBAAoB,MAAM;AACjC,2BAAqB,KAAK,eAAe;AAAA,IAC3C;AAGA,SAAK,kBAAkB,sBAAsB,MAAM;AACjD,WAAK,kBAAkB;AACvB,UAAI,CAAC,KAAK,aAAa;AACrB;AAAA,MACF;AAEA,uBAAiB,IAAI;AACrB,WAAK,cAAc;AAGnB,UAAI,KAAK,cAAc;AACrB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,uBAAuB;AACrB,QAAI,KAAK,oBAAoB,MAAM;AACjC,2BAAqB,KAAK,eAAe;AACzC,WAAK,kBAAkB;AAAA,IACzB;AAAA,EACF;AAAA,EAEA,gBAAgB;AAEd,UAAM,UAAU,KAAK,cAAc,sBAAsB;AACzD,QAAI,SAAS;AACX,cAAQ,iBAAiB,SAAS,CAAC,MAAM;AACvC,UAAE,eAAe;AACjB,eAAO,SAAS,OAAO,GAAG;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,SAAS;AAChB,SAAK,eAAe;AACpB,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,SAAS;AACP,QAAI,CAAC,KAAK,cAAc;AACtB;AAAA,IACF;AAGA,UAAM,SAAS,KAAK,cAAc,kCAAkC;AACpE,QAAI,QAAQ;AACV,aAAO,cAAc,KAAK;AAC1B,aAAO,UAAU,OAAO,QAAQ;AAGhC,YAAM,cAAc,KAAK,cAAc,mCAAmC;AAC1E,UAAI,aAAa;AACf,oBAAY,UAAU,IAAI,QAAQ;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AACF;AAGA,eAAe,OAAO,mBAAmB,gBAAgB;",
  "names": []
}
