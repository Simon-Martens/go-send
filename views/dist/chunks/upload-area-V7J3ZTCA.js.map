{
  "version": 3,
  "sources": ["../../src/ui/upload-area-empty.mjs", "../../src/ui/upload-area-list.mjs", "../../src/ui/upload-area-uploading.mjs", "../../src/ui/upload-area-complete.mjs", "../../src/ui/upload-area-error.mjs", "../../src/ui/upload-area.mjs"],
  "sourcesContent": ["import { translateElement } from \"../utils.mjs\";\n\nclass UploadEmptyView extends HTMLElement {\n  constructor() {\n    super();\n    this._afterFrame = null;\n    this._fileInput = null;\n    this._dragCounter = 0;\n    this._dropZone = null;\n    this._boundFileSelect = this.handleFileSelect.bind(this);\n    this._boundDragEnter = this.handleDragEnter.bind(this);\n    this._boundDragOver = this.handleDragOver.bind(this);\n    this._boundDragLeave = this.handleDragLeave.bind(this);\n    this._boundDrop = this.handleDrop.bind(this);\n    this._boundDropZoneClick = this.handleDropZoneClick.bind(this);\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n\n  disconnectedCallback() {\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n      this._afterFrame = null;\n    }\n    if (this._fileInput) {\n      this._fileInput.removeEventListener(\"change\", this._boundFileSelect);\n      this._fileInput = null;\n    }\n    this._removeDragListeners();\n  }\n\n  render() {\n    const template = document.getElementById(\"upload-view-empty\");\n    if (!template) {\n      console.error(\"Template #upload-view-empty not found\");\n      return;\n    }\n\n    const fragment = template.content.cloneNode(true);\n    this.innerHTML = \"\";\n    this.appendChild(fragment);\n\n    this._fileInput = this.querySelector(\"#file-upload\");\n    this._errorEl = this.querySelector('[data-role=\"error\"]');\n    this._dropZone = this.querySelector(\".border-2.border-dashed\");\n\n    if (this._fileInput) {\n      this._fileInput.addEventListener(\"change\", this._boundFileSelect);\n    }\n\n    this._setupDragListeners();\n\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n    }\n\n    this._afterFrame = requestAnimationFrame(() => {\n      this._afterFrame = null;\n      translateElement(this);\n    });\n  }\n\n  setConfig({ orClickText, addFilesLabel, noticeHTML } = {}) {\n    if (typeof orClickText === \"string\") {\n      const orClickEl = this.querySelector(\"#orClickWithSize\");\n      if (orClickEl) {\n        orClickEl.textContent = orClickText;\n      }\n    }\n    if (typeof addFilesLabel === \"string\") {\n      const addLabel = this.querySelector(\"#addFilesButton\");\n      if (addLabel) {\n        addLabel.textContent = addFilesLabel;\n      }\n    }\n    const noticeEl = this.querySelector(\"#upload-area-default-notice\");\n    if (noticeEl) {\n      if (noticeHTML) {\n        noticeEl.innerHTML = noticeHTML;\n        noticeEl.classList.remove(\"hidden\");\n      } else {\n        noticeEl.textContent = \"\";\n        noticeEl.classList.add(\"hidden\");\n      }\n    }\n  }\n\n  focusFileInput() {\n    if (this._fileInput) {\n      this._fileInput.focus();\n    }\n  }\n\n  handleFileSelect(event) {\n    const files = Array.from(event.target.files || []);\n    if (files.length === 0) {\n      return;\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(\"addfiles\", {\n        bubbles: true,\n        detail: { files },\n      }),\n    );\n\n    event.target.value = \"\";\n  }\n\n  setError(message) {\n    if (!this._errorEl) {\n      return;\n    }\n    if (message) {\n      this._errorEl.textContent = message;\n      this._errorEl.classList.remove(\"hidden\");\n    } else {\n      this._errorEl.textContent = \"\";\n      this._errorEl.classList.add(\"hidden\");\n    }\n  }\n\n  handleDropZoneClick(event) {\n    // Don't trigger if clicking on the button itself (it has its own label)\n    if (event.target.closest('label[for=\"file-upload\"]')) {\n      return;\n    }\n\n    if (this._fileInput) {\n      this._fileInput.click();\n    }\n  }\n\n  _setupDragListeners() {\n    if (!this._dropZone) {\n      return;\n    }\n    this._dropZone.addEventListener(\"dragenter\", this._boundDragEnter);\n    this._dropZone.addEventListener(\"dragover\", this._boundDragOver);\n    this._dropZone.addEventListener(\"dragleave\", this._boundDragLeave);\n    this._dropZone.addEventListener(\"drop\", this._boundDrop);\n    this._dropZone.addEventListener(\"click\", this._boundDropZoneClick);\n  }\n\n  _removeDragListeners() {\n    if (!this._dropZone) {\n      return;\n    }\n    this._dropZone.removeEventListener(\"dragenter\", this._boundDragEnter);\n    this._dropZone.removeEventListener(\"dragover\", this._boundDragOver);\n    this._dropZone.removeEventListener(\"dragleave\", this._boundDragLeave);\n    this._dropZone.removeEventListener(\"drop\", this._boundDrop);\n    this._dropZone.removeEventListener(\"click\", this._boundDropZoneClick);\n    this._dropZone = null;\n  }\n\n  handleDragEnter(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this._dragCounter++;\n\n    // Only show visual feedback when dragging files\n    if (event.dataTransfer && event.dataTransfer.types.includes(\"Files\")) {\n      this._showDragFeedback();\n    }\n  }\n\n  handleDragOver(event) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  handleDragLeave(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this._dragCounter--;\n\n    if (this._dragCounter === 0) {\n      this._hideDragFeedback();\n    }\n  }\n\n  handleDrop(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this._dragCounter = 0;\n    this._hideDragFeedback();\n\n    const files = Array.from(event.dataTransfer?.files || []);\n    if (files.length > 0) {\n      this.dispatchEvent(\n        new CustomEvent(\"addfiles\", {\n          bubbles: true,\n          detail: { files },\n        }),\n      );\n    }\n  }\n\n  _showDragFeedback() {\n    if (!this._dropZone) {\n      return;\n    }\n    this._dropZone.classList.remove(\"border-grey-transparent\", \"dark:border-grey-60\");\n    this._dropZone.classList.add(\"border-primary\", \"bg-blue-10\", \"dark:bg-blue-90\", \"dark:border-blue-40\");\n  }\n\n  _hideDragFeedback() {\n    if (!this._dropZone) {\n      return;\n    }\n    this._dropZone.classList.remove(\"border-primary\", \"bg-blue-10\", \"dark:bg-blue-90\", \"dark:border-blue-40\");\n    this._dropZone.classList.add(\"border-grey-transparent\", \"dark:border-grey-60\");\n  }\n}\n\ncustomElements.define(\"upload-empty-view\", UploadEmptyView);\n", "import { bytes, secondsToL10nId, translateElement } from \"../utils.mjs\";\n\nclass UploadListView extends HTMLElement {\n  constructor() {\n    super();\n\n    this.elements = {\n      fileInput: null,\n      fileList: null,\n      uploadButton: null,\n      totalSize: null,\n      fileCount: null,\n      addMoreLabel: null,\n      expiryContainer: null,\n      downloadLimit: null,\n      timeLimit: null,\n      orLabel: null,\n      expiryLabelTop: null,\n      expiryLabelBottom: null,\n      passwordToggle: null,\n      passwordToggleIcon: null,\n      passwordField: null,\n      passwordInput: null,\n      passwordHint: null,\n      passwordVisibilityButton: null,\n      passwordVisibilityIcon: null,\n      dropZone: null,\n      archiveNameContainer: null,\n      archiveNameInput: null,\n    };\n\n    this._afterFrame = null;\n    this._files = [];\n    this._limits = null;\n    this._defaults = null;\n    this._maxFiles = 0;\n    this._translate = null;\n    this._password = \"\";\n    this._passwordEnabled = false;\n    this._timeLimit = null;\n    this._downloadLimit = null;\n    this._errorMessage = null;\n    this._dragCounter = 0;\n\n    this._boundFileSelect = this.handleFileSelect.bind(this);\n    this._boundUploadClick = this.handleUploadClick.bind(this);\n    this._boundTimeChange = this.handleTimeLimitChange.bind(this);\n    this._boundDownloadChange = this.handleDownloadLimitChange.bind(this);\n    this._boundPasswordInput = this.handlePasswordInput.bind(this);\n    this._boundPasswordToggle = null;\n    this._boundPasswordVisibility = null;\n    this._boundDragEnter = this.handleDragEnter.bind(this);\n    this._boundDragOver = this.handleDragOver.bind(this);\n    this._boundDragLeave = this.handleDragLeave.bind(this);\n    this._boundDrop = this.handleDrop.bind(this);\n    this._boundArchiveNameInput = this.handleArchiveNameInput.bind(this);\n    this._archiveNameValid = true;\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n\n  disconnectedCallback() {\n    this._detachListeners();\n    this._removeDragListeners();\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n      this._afterFrame = null;\n    }\n  }\n\n  render() {\n    const template = document.getElementById(\"upload-view-list\");\n    if (!template) {\n      console.error(\"Template #upload-view-list not found\");\n      return;\n    }\n\n    this._detachListeners();\n\n    const fragment = template.content.cloneNode(true);\n    this.innerHTML = \"\";\n    this.appendChild(fragment);\n\n    this.elements.fileInput = this.querySelector(\"#file-upload\");\n    this.elements.fileList = this.querySelector('[data-role=\"file-list\"]');\n    this.elements.uploadButton = this.querySelector('[data-action=\"upload\"]');\n    this.elements.totalSize = this.querySelector(\n      '[data-role=\"total-size-value\"]',\n    );\n    this.elements.fileCount = this.querySelector(\n      '[data-role=\"file-count-value\"]',\n    );\n    this.elements.addMoreLabel = this.querySelector(\n      '[data-role=\"add-more-label\"]',\n    );\n    this.elements.error = this.querySelector('[data-role=\"error\"]');\n    this.elements.dropZone = this.querySelector(\".flex.flex-col\");\n\n    const optionsContainer = this.querySelector(\"#upload-area-options-slot\");\n    if (optionsContainer) {\n      const optionsTemplate = document.getElementById(\n        \"upload-view-list-options\",\n      );\n      if (optionsTemplate && optionsContainer.childElementCount === 0) {\n        optionsContainer.appendChild(optionsTemplate.content.cloneNode(true));\n      }\n      this.elements.expiryContainer = optionsContainer.querySelector(\n        '[data-role=\"expiry-container\"]',\n      );\n      this.elements.downloadLimit = optionsContainer.querySelector(\n        'select[data-role=\"download-limit\"]',\n      );\n      this.elements.timeLimit = optionsContainer.querySelector(\n        'select[data-role=\"time-limit\"]',\n      );\n      this.elements.orLabel = optionsContainer.querySelector(\n        '[data-role=\"or-label\"]',\n      );\n      this.elements.expiryLabelTop = optionsContainer.querySelector(\n        '[data-role=\"expiry-label-top\"]',\n      );\n      this.elements.expiryLabelBottom = optionsContainer.querySelector(\n        '[data-role=\"expiry-label-bottom\"]',\n      );\n      this.elements.passwordToggle = optionsContainer.querySelector(\n        '[data-role=\"password-toggle\"]',\n      );\n      this.elements.passwordToggleIcon = optionsContainer.querySelector(\n        '[data-role=\"password-toggle-icon\"]',\n      );\n      this.elements.passwordField = optionsContainer.querySelector(\n        '[data-role=\"password-field\"]',\n      );\n      this.elements.passwordInput = optionsContainer.querySelector(\n        '[data-role=\"password\"]',\n      );\n      this.elements.passwordHint = optionsContainer.querySelector(\n        '[data-role=\"password-hint\"]',\n      );\n      this.elements.passwordVisibilityButton = optionsContainer.querySelector(\n        '[data-role=\"password-visibility\"]',\n      );\n      this.elements.passwordVisibilityIcon = optionsContainer.querySelector(\n        '[data-role=\"password-visibility-icon\"]',\n      );\n      this.elements.archiveNameContainer = optionsContainer.querySelector(\n        '[data-role=\"archive-name-container\"]',\n      );\n      this.elements.archiveNameInput = optionsContainer.querySelector(\n        '[data-role=\"archive-name\"]',\n      );\n    }\n\n    this._attachBaseListeners();\n    this._setupDragListeners();\n\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n    }\n    this._afterFrame = requestAnimationFrame(() => {\n      this._afterFrame = null;\n      translateElement(this);\n      this.applyPasswordState();\n    });\n  }\n\n  setState({\n    files = [],\n    totalSize = 0,\n    maxFiles = 0,\n    limits = null,\n    defaults = null,\n    translate = null,\n    timeLimit = null,\n    downloadLimit = null,\n    password = \"\",\n  } = {}) {\n    this._files = Array.from(files);\n    this._maxFiles = maxFiles || 0;\n    this._limits = limits;\n    this._defaults = defaults;\n    this._translate = translate;\n\n    if (typeof timeLimit === \"number\" && !Number.isNaN(timeLimit)) {\n      this._timeLimit = timeLimit;\n    }\n\n    if (typeof downloadLimit === \"number\" && !Number.isNaN(downloadLimit)) {\n      this._downloadLimit = downloadLimit;\n    }\n\n    const hasServerPassword =\n      typeof password === \"string\" && password.length > 0;\n    if (this._files.length === 0) {\n      this._passwordEnabled = false;\n      this._password = \"\";\n    } else if (hasServerPassword) {\n      this._passwordEnabled = true;\n      this._password = password;\n    } else if (password === null && !this._passwordEnabled) {\n      this._password = \"\";\n    }\n\n    const resolvedTotalSize =\n      totalSize || this._files.reduce((sum, file) => sum + (file.size || 0), 0);\n\n    this._renderFileList();\n    this._updateFileCount();\n    this._updateTotalSize(resolvedTotalSize);\n    this._renderExpiryControls();\n    this._updateOptionValues();\n    this._updateStaticLabels(resolvedTotalSize);\n    this._updateArchiveNameVisibility();\n    this.applyPasswordState();\n    this.updatePasswordHint(this._password.length);\n    this.setError(this._errorMessage);\n    this._updateUploadButtonState();\n  }\n\n  updateTotalSize(totalSize) {\n    this._updateTotalSize(totalSize);\n  }\n\n  setUploadEnabled(enabled) {\n    if (this.elements.uploadButton) {\n      this.elements.uploadButton.disabled = !enabled;\n    }\n  }\n\n  updateProgress() {}\n\n  updateProgressText() {}\n\n  _renderFileList() {\n    if (!this.elements.fileList) {\n      return;\n    }\n\n    this.elements.fileList.innerHTML = \"\";\n\n    const template = document.getElementById(\"upload-view-list-item\");\n    if (!template) {\n      console.error(\"Template #upload-view-list-item not found\");\n      return;\n    }\n\n    this._files.forEach((file, index) => {\n      const fragment = template.content.cloneNode(true);\n      const item = fragment.querySelector(\"li\");\n      const nameEl = fragment.querySelector('[data-role=\"file-name\"]');\n      const metaEl = fragment.querySelector('[data-role=\"file-meta\"]');\n      const removeButton = fragment.querySelector('[data-action=\"remove\"]');\n      const srLabel = fragment.querySelector('[data-role=\"remove-label\"]');\n      const iconEl = fragment.querySelector('[data-role=\"file-icon\"]');\n\n      if (nameEl) {\n        nameEl.textContent = file.name || \"Untitled\";\n      }\n\n      if (metaEl) {\n        const path = file.webkitRelativePath || \"\";\n        const sizeLabel = bytes(file.size || 0);\n        metaEl.textContent = path ? `${sizeLabel} \u2022 ${path}` : sizeLabel;\n      }\n\n      // Set icon based on file type\n      if (iconEl && file.name) {\n        const fileName = file.name.toLowerCase();\n        if (fileName.endsWith(\".zip\")) {\n          iconEl.className =\n            \"ri-folder-6-line h-8 w-8 flex-shrink-0 text-primary mr-3 text-3xl leading-8\";\n        }\n      }\n\n      if (srLabel) {\n        srLabel.textContent = this._translateText(\n          \"deleteButtonHover\",\n          \"Remove file\",\n        );\n      }\n\n      if (removeButton) {\n        removeButton.dataset.index = String(index);\n        removeButton.addEventListener(\"click\", (event) =>\n          this.handleRemoveClick(event),\n        );\n      }\n\n      if (item) {\n        this.elements.fileList.appendChild(fragment);\n      }\n    });\n  }\n\n  _renderExpiryControls() {\n    const container = this.elements.expiryContainer;\n    const downloadSelect = this.elements.downloadLimit;\n    const timeSelect = this.elements.timeLimit;\n    if (!container || !downloadSelect || !timeSelect) {\n      return;\n    }\n\n    this._detachOptionListeners();\n\n    const downloadToken = \"__DOWNLOAD__\";\n    const timeToken = \"__TIMESPAN__\";\n    const fallback = `Expires after ${downloadToken} ${this._translateText(\"or\", \"or\")} ${timeToken} ends`;\n\n    const translated = this._translateText(\"archiveExpiryInfo\", fallback, {\n      downloadCount: downloadToken,\n      timespan: timeToken,\n    });\n\n    const downloadSplit = translated.split(downloadToken);\n    const beforeDownload = downloadSplit[0] || \"\";\n    const afterDownloadRaw = downloadSplit[1] || \"\";\n    const timeSplit = afterDownloadRaw.split(timeToken);\n    const between = timeSplit[0] || \"\";\n    const afterTime = timeSplit[1] || \"\";\n\n    if (this.elements.expiryLabelTop) {\n      const labelText =\n        beforeDownload.trim() ||\n        this._translateText(\"expiresAfterLabel\", \"Expires after\");\n      this.elements.expiryLabelTop.textContent = labelText;\n    }\n    if (this.elements.orLabel) {\n      const orText = between.trim() || this._translateText(\"or\", \"or\");\n      this.elements.orLabel.textContent = orText;\n    }\n    if (this.elements.expiryLabelBottom) {\n      const suffixText =\n        afterTime.trim() || this._translateText(\"expiresAfterSuffix\", \"\");\n      this.elements.expiryLabelBottom.textContent = suffixText;\n    }\n\n    this._downloadLimit = this._populateSelect(\n      downloadSelect,\n      (this._defaults?.DOWNLOAD_COUNTS || []).filter((count) => {\n        const max = this._limits?.MAX_DOWNLOADS;\n        return max ? count <= max : true;\n      }),\n      this._downloadLimit,\n      (value) =>\n        this._translateText(\"downloadCount\", `${value}`, { num: value }),\n    );\n\n    this._timeLimit = this._populateSelect(\n      timeSelect,\n      (this._defaults?.EXPIRE_TIMES_SECONDS || []).filter((seconds) => {\n        const max = this._limits?.MAX_EXPIRE_SECONDS;\n        return max ? seconds <= max : true;\n      }),\n      this._timeLimit,\n      (value) => this._formatExpireOption(value),\n    );\n\n    this._attachOptionListeners();\n  }\n\n  _populateSelect(select, values, selected, formatter) {\n    if (!select) {\n      return selected;\n    }\n\n    const desired =\n      selected !== null && selected !== undefined ? String(selected) : null;\n    select.innerHTML = \"\";\n\n    values.forEach((value) => {\n      const option = document.createElement(\"option\");\n      option.value = String(value);\n      option.textContent = formatter(value);\n      select.appendChild(option);\n    });\n\n    if (\n      desired &&\n      Array.from(select.options).some((opt) => opt.value === desired)\n    ) {\n      select.value = desired;\n    } else if (select.options.length > 0) {\n      select.selectedIndex = 0;\n    }\n\n    return select.options.length > 0 ? Number(select.value) : selected;\n  }\n\n  _updateOptionValues() {\n    if (\n      this.elements.downloadLimit &&\n      this._downloadLimit !== null &&\n      this._downloadLimit !== undefined\n    ) {\n      const value = String(this._downloadLimit);\n      if (\n        Array.from(this.elements.downloadLimit.options).some(\n          (opt) => opt.value === value,\n        )\n      ) {\n        this.elements.downloadLimit.value = value;\n      }\n    }\n\n    if (\n      this.elements.timeLimit &&\n      this._timeLimit !== null &&\n      this._timeLimit !== undefined\n    ) {\n      const value = String(this._timeLimit);\n      if (\n        Array.from(this.elements.timeLimit.options).some(\n          (opt) => opt.value === value,\n        )\n      ) {\n        this.elements.timeLimit.value = value;\n      }\n    }\n\n    if (this.elements.passwordInput) {\n      this.elements.passwordInput.value = this._password || \"\";\n    }\n  }\n\n  _updateFileCount() {\n    if (!this.elements.fileCount) {\n      return;\n    }\n    const count = this._files.length;\n    const label = this._translateText(\n      \"fileCount\",\n      count === 1 ? \"1 file\" : `${count} files`,\n      { num: count },\n    );\n    const max = this._maxFiles\n      ? this._translateText(\"maxFilesPerArchive\", `Max ${this._maxFiles}`, {\n          num: this._maxFiles,\n        })\n      : \"\";\n    this.elements.fileCount.textContent = max ? `${label} \u2022 ${max}` : label;\n  }\n\n  _updateTotalSize(totalSize) {\n    if (!this.elements.totalSize) {\n      return;\n    }\n    const sizeLabel = bytes(totalSize || 0);\n    const translated = this._translateText(\"totalSize\", `${sizeLabel}`, {\n      size: sizeLabel,\n    });\n    this.elements.totalSize.textContent = translated;\n  }\n\n  _updateStaticLabels(totalSize) {\n    if (this.elements.addMoreLabel) {\n      this.elements.addMoreLabel.textContent = this._translateText(\n        \"addFilesButton\",\n        \"Add more files\",\n      );\n    }\n    if (this.elements.uploadButton) {\n      const uploadLabel = this._translateText(\"uploadButton\", \"Upload\");\n      const uploadSpan =\n        this.elements.uploadButton.querySelector(\"#uploadButton\");\n      if (uploadSpan) {\n        uploadSpan.textContent = uploadLabel;\n      } else {\n        this.elements.uploadButton.textContent = uploadLabel;\n      }\n    }\n    this._updateTotalSize(totalSize);\n  }\n\n  _updateArchiveNameVisibility() {\n    if (!this.elements.archiveNameContainer) {\n      return;\n    }\n\n    // Show archive name input only when there are multiple files\n    if (this._files.length > 1) {\n      const wasHidden =\n        this.elements.archiveNameContainer.classList.contains(\"hidden\");\n      this.elements.archiveNameContainer.classList.remove(\"hidden\");\n\n      // Translate elements if they're being shown for the first time\n      if (wasHidden) {\n        translateElement(this.elements.archiveNameContainer);\n      }\n\n      // Set default value if input is empty\n      if (\n        this.elements.archiveNameInput &&\n        !this.elements.archiveNameInput.value\n      ) {\n        this.elements.archiveNameInput.value = \"Send-Archive\";\n      }\n    } else {\n      this.elements.archiveNameContainer.classList.add(\"hidden\");\n      // Reset validation state when hiding (not needed for single file)\n      this._archiveNameValid = true;\n      this._showArchiveNameError(null);\n    }\n  }\n\n  _attachBaseListeners() {\n    if (this.elements.fileInput) {\n      this.elements.fileInput.addEventListener(\"change\", this._boundFileSelect);\n    }\n    if (this.elements.uploadButton) {\n      this.elements.uploadButton.addEventListener(\n        \"click\",\n        this._boundUploadClick,\n      );\n    }\n    if (this.elements.passwordToggle) {\n      this._boundPasswordToggle =\n        this._boundPasswordToggle || this.handlePasswordToggle.bind(this);\n      this.elements.passwordToggle.addEventListener(\n        \"click\",\n        this._boundPasswordToggle,\n      );\n    }\n    if (this.elements.passwordVisibilityButton) {\n      this._boundPasswordVisibility =\n        this._boundPasswordVisibility ||\n        this.togglePasswordVisibility.bind(this);\n      this.elements.passwordVisibilityButton.addEventListener(\n        \"click\",\n        this._boundPasswordVisibility,\n      );\n    }\n    if (this.elements.passwordInput) {\n      this.elements.passwordInput.addEventListener(\n        \"input\",\n        this._boundPasswordInput,\n      );\n    }\n    if (this.elements.archiveNameInput) {\n      this.elements.archiveNameInput.addEventListener(\n        \"input\",\n        this._boundArchiveNameInput,\n      );\n    }\n  }\n\n  _attachOptionListeners() {\n    if (this.elements.downloadLimit) {\n      this.elements.downloadLimit.addEventListener(\n        \"change\",\n        this._boundDownloadChange,\n      );\n    }\n    if (this.elements.timeLimit) {\n      this.elements.timeLimit.addEventListener(\"change\", this._boundTimeChange);\n    }\n  }\n\n  _detachOptionListeners() {\n    if (this.elements.downloadLimit) {\n      this.elements.downloadLimit.removeEventListener(\n        \"change\",\n        this._boundDownloadChange,\n      );\n    }\n    if (this.elements.timeLimit) {\n      this.elements.timeLimit.removeEventListener(\n        \"change\",\n        this._boundTimeChange,\n      );\n    }\n  }\n\n  _detachListeners() {\n    if (this.elements.fileInput) {\n      this.elements.fileInput.removeEventListener(\n        \"change\",\n        this._boundFileSelect,\n      );\n    }\n    if (this.elements.uploadButton) {\n      this.elements.uploadButton.removeEventListener(\n        \"click\",\n        this._boundUploadClick,\n      );\n    }\n    if (this.elements.passwordToggle && this._boundPasswordToggle) {\n      this.elements.passwordToggle.removeEventListener(\n        \"click\",\n        this._boundPasswordToggle,\n      );\n    }\n    if (\n      this.elements.passwordVisibilityButton &&\n      this._boundPasswordVisibility\n    ) {\n      this.elements.passwordVisibilityButton.removeEventListener(\n        \"click\",\n        this._boundPasswordVisibility,\n      );\n    }\n    if (this.elements.passwordInput) {\n      this.elements.passwordInput.removeEventListener(\n        \"input\",\n        this._boundPasswordInput,\n      );\n    }\n    if (this.elements.archiveNameInput) {\n      this.elements.archiveNameInput.removeEventListener(\n        \"input\",\n        this._boundArchiveNameInput,\n      );\n    }\n    this._detachOptionListeners();\n  }\n\n  _formatExpireOption(seconds) {\n    const l10n = secondsToL10nId(seconds);\n    const fallback = this._formatDuration(seconds);\n    return this._translateText(l10n.id, fallback, l10n);\n  }\n\n  _formatDuration(seconds) {\n    const MINUTE = 60;\n    const HOUR = 3600;\n    const DAY = 86400;\n\n    if (seconds % DAY === 0) {\n      const days = seconds / DAY;\n      return days === 1 ? \"1 day\" : `${days} days`;\n    }\n    if (seconds % HOUR === 0) {\n      const hours = seconds / HOUR;\n      return hours === 1 ? \"1 hour\" : `${hours} hours`;\n    }\n    if (seconds % MINUTE === 0) {\n      const minutes = seconds / MINUTE;\n      return minutes === 1 ? \"1 minute\" : `${minutes} minutes`;\n    }\n    return `${seconds} seconds`;\n  }\n\n  _translateText(key, fallback, params) {\n    try {\n      if (typeof this._translate === \"function\") {\n        const result = this._translate(key, params);\n        if (result) {\n          return result;\n        }\n      } else if (typeof window.translate === \"function\") {\n        const result = window.translate(key, params);\n        if (result) {\n          return result;\n        }\n      }\n    } catch (err) {\n      // ignore missing translation\n    }\n    return fallback;\n  }\n\n  updatePasswordHint(length) {\n    if (!this.elements.passwordHint) {\n      return;\n    }\n\n    if (length >= 4096) {\n      this.elements.passwordHint.textContent = this._translateText(\n        \"maxPasswordLength\",\n        \"Maximum password length\",\n        { length: 4096 },\n      );\n    } else {\n      this.elements.passwordHint.textContent = \"\";\n    }\n  }\n\n  handleFileSelect(event) {\n    const files = Array.from(event.target.files || []);\n    if (files.length === 0) {\n      return;\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(\"addfiles\", {\n        bubbles: true,\n        detail: { files },\n      }),\n    );\n\n    event.target.value = \"\";\n  }\n\n  handleUploadClick(event) {\n    event.preventDefault();\n\n    // Validate archive name if multiple files\n    if (this._files.length > 1 && this.elements.archiveNameInput) {\n      const archiveName = this.elements.archiveNameInput.value;\n      const validationError = this._validateArchiveName(archiveName);\n\n      if (validationError) {\n        this._archiveNameValid = false;\n        this._showArchiveNameError(validationError);\n        this._updateUploadButtonState();\n        return;\n      }\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(\"upload\", {\n        bubbles: true,\n      }),\n    );\n  }\n\n  handleRemoveClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const index = Number.parseInt(event.currentTarget.dataset.index, 10);\n    if (Number.isNaN(index) || index < 0 || index >= this._files.length) {\n      return;\n    }\n\n    const [file] = this._files.splice(index, 1);\n    this._renderFileList();\n    const total = this._files.reduce((sum, f) => sum + (f.size || 0), 0);\n    this._updateFileCount();\n    this._updateTotalSize(total);\n    this._updateArchiveNameVisibility();\n    this._updateUploadButtonState();\n\n    this.dispatchEvent(\n      new CustomEvent(\"removeupload\", {\n        bubbles: true,\n        detail: { file, index },\n      }),\n    );\n  }\n\n  handleTimeLimitChange(event) {\n    const value = Number.parseInt(event.target.value, 10);\n    if (Number.isNaN(value)) {\n      return;\n    }\n    this._timeLimit = value;\n    this.dispatchEvent(\n      new CustomEvent(\"updateoptions\", {\n        bubbles: true,\n        detail: { timeLimit: value },\n      }),\n    );\n  }\n\n  handleDownloadLimitChange(event) {\n    const value = Number.parseInt(event.target.value, 10);\n    if (Number.isNaN(value)) {\n      return;\n    }\n    this._downloadLimit = value;\n    this.dispatchEvent(\n      new CustomEvent(\"updateoptions\", {\n        bubbles: true,\n        detail: { downloadLimit: value },\n      }),\n    );\n  }\n\n  handlePasswordInput(event) {\n    this._password = event.target.value;\n    this._passwordEnabled = true;\n    this.updatePasswordHint(this._password.length);\n    this.dispatchEvent(\n      new CustomEvent(\"updateoptions\", {\n        bubbles: true,\n        detail: { password: this._password || null },\n      }),\n    );\n  }\n\n  handleArchiveNameInput(event) {\n    const archiveName = event.target.value;\n\n    // Validate the filename\n    const validationError = this._validateArchiveName(archiveName);\n\n    if (validationError) {\n      this._archiveNameValid = false;\n      this._showArchiveNameError(validationError);\n      this._updateUploadButtonState();\n      // Don't dispatch the update if invalid\n      return;\n    }\n\n    // Clear any previous error\n    this._archiveNameValid = true;\n    this._showArchiveNameError(null);\n    this._updateUploadButtonState();\n\n    // Dispatch the update with trimmed name\n    const trimmedName = archiveName.trim();\n    this.dispatchEvent(\n      new CustomEvent(\"updateoptions\", {\n        bubbles: true,\n        detail: { archiveName: trimmedName || null },\n      }),\n    );\n  }\n\n  _validateArchiveName(name) {\n    if (!name || !name.trim()) {\n      return null; // Empty is OK, will use default\n    }\n\n    const trimmed = name.trim();\n\n    // Forbidden characters across Windows, macOS, and Linux\n    // Windows: < > : \" / \\ | ? *\n    // macOS: : /\n    // Linux: /\n    const forbiddenCharsRegex = /[<>:\"/\\\\|?*]/;\n\n    if (forbiddenCharsRegex.test(trimmed)) {\n      return \"archiveNameInvalidChars\";\n    }\n\n    // Can't end with dot or space (Windows restriction)\n    if (/[.\\s]$/.test(trimmed)) {\n      return \"archiveNameInvalidEnd\";\n    }\n\n    // Windows reserved names (case-insensitive)\n    const reservedNames = /^(CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])$/i;\n    const nameWithoutExt = trimmed.replace(/\\.zip$/i, \"\");\n\n    if (reservedNames.test(nameWithoutExt)) {\n      return \"archiveNameReserved\";\n    }\n\n    return null; // Valid\n  }\n\n  _showArchiveNameError(errorKey) {\n    if (!this.elements.archiveNameInput) {\n      return;\n    }\n\n    const errorEl = this.elements.archiveNameContainer?.querySelector(\n      '[data-role=\"archive-name-error\"]',\n    );\n    if (!errorEl) {\n      return;\n    }\n\n    if (errorKey) {\n      // Get translated error message\n      // Use window.translate directly to ensure we get the latest translations\n      let errorMessage = \"Invalid filename\";\n      try {\n        const translate = window.translate || this._translate;\n        if (typeof translate === \"function\") {\n          const translated = translate(errorKey);\n          if (translated && translated !== errorKey) {\n            errorMessage = translated;\n          }\n        }\n      } catch (err) {\n        console.warn(`Translation failed for key: ${errorKey}`, err);\n      }\n\n      errorEl.textContent = errorMessage;\n      errorEl.classList.remove(\"hidden\");\n\n      // Add error styling to input\n      this.elements.archiveNameInput.classList.add(\n        \"border-red-500\",\n        \"dark:border-red-500\",\n      );\n    } else {\n      errorEl.textContent = \"\";\n      errorEl.classList.add(\"hidden\");\n\n      // Remove error styling from input\n      this.elements.archiveNameInput.classList.remove(\n        \"border-red-500\",\n        \"dark:border-red-500\",\n      );\n    }\n  }\n\n  _updateUploadButtonState() {\n    if (!this.elements.uploadButton) {\n      return;\n    }\n\n    // Disable upload button if archive name is invalid and we have multiple files\n    const shouldDisable = this._files.length > 1 && !this._archiveNameValid;\n    this.elements.uploadButton.disabled = shouldDisable;\n  }\n\n  setError(message) {\n    this._errorMessage = message;\n    if (!this.elements.error) {\n      return;\n    }\n    if (message) {\n      this.elements.error.textContent = message;\n      this.elements.error.classList.remove(\"hidden\");\n    } else {\n      this.elements.error.textContent = \"\";\n      this.elements.error.classList.add(\"hidden\");\n    }\n  }\n\n  handlePasswordToggle(event) {\n    event.preventDefault();\n    if (!this.elements.passwordField || !this.elements.passwordToggleIcon) {\n      return;\n    }\n\n    this._passwordEnabled = !this._passwordEnabled;\n    if (!this._passwordEnabled) {\n      this._password = \"\";\n      this.updatePasswordHint(0);\n      this.dispatchEvent(\n        new CustomEvent(\"updateoptions\", {\n          bubbles: true,\n          detail: { password: null },\n        }),\n      );\n    }\n\n    this.applyPasswordState();\n\n    if (this._passwordEnabled && this.elements.passwordInput) {\n      this.elements.passwordInput.focus();\n    }\n  }\n\n  togglePasswordVisibility(event) {\n    event.preventDefault();\n    if (!this.elements.passwordInput || !this.elements.passwordVisibilityIcon) {\n      return;\n    }\n\n    const input = this.elements.passwordInput;\n    const isPassword = input.type === \"password\";\n    input.type = isPassword ? \"text\" : \"password\";\n    this.elements.passwordVisibilityIcon.src = isPassword\n      ? \"/eye-off.svg\"\n      : \"/eye.svg\";\n    input.focus();\n  }\n\n  applyPasswordState() {\n    if (!this.elements.passwordField || !this.elements.passwordToggleIcon) {\n      return;\n    }\n\n    // Get the lock icon from within the toggle icon container\n    const lockIcon = this.elements.passwordToggleIcon.querySelector(\n      '[data-role=\"lock-icon\"]',\n    );\n\n    if (this._passwordEnabled) {\n      this.elements.passwordField.removeAttribute(\"hidden\");\n\n      // Show lock icon\n      if (lockIcon) {\n        lockIcon.classList.remove(\"hidden\");\n      }\n\n      // Add primary background to the toggle icon box\n      this.elements.passwordToggleIcon.classList.add(\"bg-primary\");\n\n      if (this.elements.passwordInput) {\n        this.elements.passwordInput.value = this._password || \"\";\n        this.elements.passwordInput.type = \"password\";\n      }\n      if (this.elements.passwordVisibilityIcon) {\n        this.elements.passwordVisibilityIcon.src = \"/eye.svg\";\n      }\n    } else {\n      this.elements.passwordField.setAttribute(\"hidden\", \"hidden\");\n\n      // Hide lock icon\n      if (lockIcon) {\n        lockIcon.classList.add(\"hidden\");\n      }\n\n      // Remove primary background from the toggle icon box\n      this.elements.passwordToggleIcon.classList.remove(\"bg-primary\");\n\n      if (this.elements.passwordInput) {\n        this.elements.passwordInput.value = \"\";\n        this.elements.passwordInput.type = \"password\";\n      }\n      if (this.elements.passwordVisibilityIcon) {\n        this.elements.passwordVisibilityIcon.src = \"/eye.svg\";\n      }\n    }\n  }\n\n  _setupDragListeners() {\n    if (!this.elements.dropZone) {\n      return;\n    }\n    this.elements.dropZone.addEventListener(\"dragenter\", this._boundDragEnter);\n    this.elements.dropZone.addEventListener(\"dragover\", this._boundDragOver);\n    this.elements.dropZone.addEventListener(\"dragleave\", this._boundDragLeave);\n    this.elements.dropZone.addEventListener(\"drop\", this._boundDrop);\n  }\n\n  _removeDragListeners() {\n    if (!this.elements.dropZone) {\n      return;\n    }\n    this.elements.dropZone.removeEventListener(\n      \"dragenter\",\n      this._boundDragEnter,\n    );\n    this.elements.dropZone.removeEventListener(\"dragover\", this._boundDragOver);\n    this.elements.dropZone.removeEventListener(\n      \"dragleave\",\n      this._boundDragLeave,\n    );\n    this.elements.dropZone.removeEventListener(\"drop\", this._boundDrop);\n    this.elements.dropZone = null;\n  }\n\n  handleDragEnter(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this._dragCounter++;\n\n    // Only show visual feedback when dragging files\n    if (event.dataTransfer && event.dataTransfer.types.includes(\"Files\")) {\n      this._showDragFeedback();\n    }\n  }\n\n  handleDragOver(event) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  handleDragLeave(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this._dragCounter--;\n\n    if (this._dragCounter === 0) {\n      this._hideDragFeedback();\n    }\n  }\n\n  handleDrop(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this._dragCounter = 0;\n    this._hideDragFeedback();\n\n    const files = Array.from(event.dataTransfer?.files || []);\n    if (files.length > 0) {\n      this.dispatchEvent(\n        new CustomEvent(\"addfiles\", {\n          bubbles: true,\n          detail: { files },\n        }),\n      );\n    }\n  }\n\n  _showDragFeedback() {\n    if (!this.elements.dropZone) {\n      return;\n    }\n    this.elements.dropZone.classList.add(\n      \"ring-2\",\n      \"ring-primary\",\n      \"ring-inset\",\n      \"bg-blue-10\",\n      \"dark:bg-blue-90\",\n    );\n  }\n\n  _hideDragFeedback() {\n    if (!this.elements.dropZone) {\n      return;\n    }\n    this.elements.dropZone.classList.remove(\n      \"ring-2\",\n      \"ring-primary\",\n      \"ring-inset\",\n      \"bg-blue-10\",\n      \"dark:bg-blue-90\",\n    );\n  }\n}\n\ncustomElements.define(\"upload-list-view\", UploadListView);\n", "import { translateElement } from \"../utils.mjs\";\nimport { bytes } from \"../utils.mjs\";\n\nclass UploadUploadingView extends HTMLElement {\n  constructor() {\n    super();\n    this._afterFrame = null;\n    this._progressBar = null;\n    this._progressPercent = null;\n    this._boundHandleCancel = this.handleCancel.bind(this);\n  }\n\n  connectedCallback() {\n    this.render();\n    this.addEventListener(\"click\", this._boundHandleCancel);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", this._boundHandleCancel);\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n      this._afterFrame = null;\n    }\n  }\n\n  render() {\n    const template = document.getElementById(\"upload-view-uploading\");\n    if (!template) {\n      console.error(\"Template #upload-view-uploading not found\");\n      return;\n    }\n\n    const fragment = template.content.cloneNode(true);\n    this.innerHTML = \"\";\n    this.appendChild(fragment);\n\n    // Cache references to progress elements\n    this._progressBar = this.querySelector('[data-role=\"progress-bar\"]');\n    this._progressPercent = this.querySelector('[data-role=\"progress-percent\"]');\n\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n    }\n    this._afterFrame = requestAnimationFrame(() => {\n      this._afterFrame = null;\n      translateElement(this);\n    });\n  }\n\n  handleCancel(event) {\n    const target = event.target.closest('[data-action=\"cancel\"]');\n    if (!target) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Dispatch cancel event that bubbles up\n    this.dispatchEvent(new CustomEvent(\"cancel\", {\n      bubbles: true,\n      composed: true,\n    }));\n  }\n\n  /**\n   * Update upload progress\n   * @param {number} ratio - Progress ratio from 0.0 to 1.0\n   * @param {number} bytesUploaded - Bytes uploaded so far\n   * @param {number} totalBytes - Total bytes to upload\n   */\n  updateProgress(ratio, bytesUploaded, totalBytes) {\n    if (this._progressBar) {\n      this._progressBar.value = ratio;\n    }\n\n    if (this._progressPercent) {\n      const percent = Math.round(ratio * 100);\n      this._progressPercent.textContent = `${percent}%`;\n    }\n  }\n\n  /**\n   * Set file information\n   * @param {string} name - File name\n   * @param {number} size - File size in bytes\n   */\n  setFileInfo(name, size) {\n    const nameEl = this.querySelector('[data-role=\"file-name\"]');\n    const sizeEl = this.querySelector('[data-role=\"file-size\"]');\n\n    if (nameEl) {\n      nameEl.textContent = name;\n    }\n    if (sizeEl) {\n      sizeEl.textContent = bytes(size);\n    }\n  }\n\n  /**\n   * Set expiry information\n   * @param {string} expiryText - Formatted expiry text\n   */\n  setExpiryInfo(expiryText) {\n    const expiryEl = this.querySelector('[data-role=\"expiry-info\"]');\n    if (expiryEl) {\n      expiryEl.textContent = expiryText;\n    }\n  }\n}\n\ncustomElements.define(\"upload-uploading-view\", UploadUploadingView);\n", "import { translateElement, copyToClipboard } from \"../utils.mjs\";\nimport qrcode from \"../qrcode.mjs\";\n\nclass UploadCompleteView extends HTMLElement {\n  constructor() {\n    super();\n    this._afterFrame = null;\n    this._ownedFile = null;\n    this._boundCopy = this.handleCopy.bind(this);\n    this._boundOk = this.handleOk.bind(this);\n    this._boundLinkClick = this.handleLinkClick.bind(this);\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n\n  disconnectedCallback() {\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n      this._afterFrame = null;\n    }\n    this.unbindEventHandlers();\n  }\n\n  render() {\n    const template = document.getElementById(\"upload-view-complete\");\n    if (!template) {\n      console.error(\"Template #upload-view-complete not found\");\n      return;\n    }\n\n    const fragment = template.content.cloneNode(true);\n    this.innerHTML = \"\";\n    this.appendChild(fragment);\n\n    this.bindEventHandlers();\n\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n    }\n\n    this._afterFrame = requestAnimationFrame(() => {\n      this._afterFrame = null;\n      translateElement(this);\n\n      // Re-apply file data after translation\n      if (this._ownedFile) {\n        this.setUploadedFile(this._ownedFile);\n      }\n    });\n  }\n\n  bindEventHandlers() {\n    const copyBtn = this.querySelector('[data-action=\"copy\"]');\n    const okBtn = this.querySelector('[data-action=\"ok\"]');\n    const linkInput = this.querySelector('[data-role=\"download-link\"]');\n\n    if (copyBtn) {\n      copyBtn.addEventListener(\"click\", this._boundCopy);\n    }\n    if (okBtn) {\n      okBtn.addEventListener(\"click\", this._boundOk);\n    }\n    if (linkInput) {\n      linkInput.addEventListener(\"click\", this._boundLinkClick);\n    }\n  }\n\n  unbindEventHandlers() {\n    const copyBtn = this.querySelector('[data-action=\"copy\"]');\n    const okBtn = this.querySelector('[data-action=\"ok\"]');\n    const linkInput = this.querySelector('[data-role=\"download-link\"]');\n\n    if (copyBtn) {\n      copyBtn.removeEventListener(\"click\", this._boundCopy);\n    }\n    if (okBtn) {\n      okBtn.removeEventListener(\"click\", this._boundOk);\n    }\n    if (linkInput) {\n      linkInput.removeEventListener(\"click\", this._boundLinkClick);\n    }\n  }\n\n  setUploadedFile(ownedFile) {\n    if (!ownedFile) {\n      console.warn(\"No ownedFile provided to setUploadedFile\");\n      return;\n    }\n\n    this._ownedFile = ownedFile;\n\n    // Set filename\n    const filenameEl = this.querySelector('[data-role=\"filename\"]');\n    if (filenameEl && ownedFile.name) {\n      filenameEl.textContent = ownedFile.name;\n    }\n\n    // Set download link\n    const linkInput = this.querySelector('[data-role=\"download-link\"]');\n    if (linkInput && ownedFile.url) {\n      linkInput.value = ownedFile.url;\n\n      // Auto-select the text after a brief delay to ensure rendering is complete\n      requestAnimationFrame(() => {\n        linkInput.select();\n        linkInput.focus();\n      });\n    }\n\n    // Generate QR code\n    this.generateQRCode(ownedFile.url);\n  }\n\n  generateQRCode(url) {\n    if (!url) {\n      return;\n    }\n\n    const container = this.querySelector('[data-role=\"qr-container\"]');\n    if (!container) {\n      return;\n    }\n\n    try {\n      const qr = qrcode(0, \"L\"); // Type 0 = auto-detect size, error correction level L\n      qr.addData(url);\n      qr.make();\n\n      const svg = qr.createSvgTag({\n        scalable: true,\n        cellSize: 4,\n        margin: 4,\n      });\n\n      container.innerHTML = svg;\n\n      // Style the SVG\n      const svgEl = container.querySelector(\"svg\");\n      if (svgEl) {\n        svgEl.style.maxWidth = \"200px\";\n        svgEl.style.height = \"auto\";\n      }\n    } catch (err) {\n      console.error(\"Error generating QR code:\", err);\n      container.innerHTML =\n        '<p class=\"text-sm text-grey-60\">QR code unavailable</p>';\n    }\n  }\n\n  handleCopy(event) {\n    event.preventDefault();\n\n    const linkInput = this.querySelector('[data-role=\"download-link\"]');\n    if (!linkInput || !linkInput.value) {\n      return;\n    }\n\n    const url = linkInput.value;\n    const success = copyToClipboard(url);\n\n    if (success) {\n      // Dispatch copy event to bubble up\n      this.dispatchEvent(\n        new CustomEvent(\"copy\", {\n          bubbles: true,\n          detail: { url },\n        }),\n      );\n\n      // Visual feedback - change icon to check\n      const copyBtn = event.currentTarget;\n      const iconEl = copyBtn.querySelector('[data-role=\"copy-icon\"]');\n\n      if (iconEl) {\n        const originalClass = iconEl.className;\n        iconEl.className = \"ri-check-line text-lg leading-4\";\n        setTimeout(() => {\n          iconEl.className = originalClass;\n        }, 2000);\n      }\n    }\n  }\n\n  handleOk(event) {\n    event.preventDefault();\n\n    // Dispatch event to signal completion\n    this.dispatchEvent(\n      new CustomEvent(\"complete-acknowledged\", {\n        bubbles: true,\n        detail: { file: this._ownedFile },\n      }),\n    );\n  }\n\n  handleLinkClick(event) {\n    // Select all text when clicking the input field\n    event.currentTarget.select();\n  }\n}\n\ncustomElements.define(\"upload-complete-view\", UploadCompleteView);\n", "import { translateElement } from \"../utils.mjs\";\n\nclass UploadErrorView extends HTMLElement {\n  constructor() {\n    super();\n    this._afterFrame = null;\n    this._errorMessage = null;\n    this._boundRetry = this.handleRetry.bind(this);\n    this._boundOk = this.handleOk.bind(this);\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n\n  disconnectedCallback() {\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n      this._afterFrame = null;\n    }\n    this.unbindEventHandlers();\n  }\n\n  render() {\n    const template = document.getElementById(\"upload-view-error\");\n    if (!template) {\n      console.error(\"Template #upload-view-error not found\");\n      return;\n    }\n\n    const fragment = template.content.cloneNode(true);\n    this.innerHTML = \"\";\n    this.appendChild(fragment);\n\n    this.bindEventHandlers();\n\n    if (this._afterFrame !== null) {\n      cancelAnimationFrame(this._afterFrame);\n    }\n\n    this._afterFrame = requestAnimationFrame(() => {\n      this._afterFrame = null;\n      translateElement(this);\n\n      // Apply error message if set\n      if (this._errorMessage) {\n        this.setErrorMessage(this._errorMessage);\n      }\n    });\n  }\n\n  bindEventHandlers() {\n    const retryBtn = this.querySelector('[data-action=\"retry\"]');\n    const okBtn = this.querySelector('[data-action=\"ok\"]');\n\n    console.log(\"[UploadErrorView] Binding event handlers\", { retryBtn, okBtn });\n\n    if (retryBtn) {\n      retryBtn.addEventListener(\"click\", this._boundRetry);\n    }\n    if (okBtn) {\n      okBtn.addEventListener(\"click\", this._boundOk);\n    }\n  }\n\n  unbindEventHandlers() {\n    const retryBtn = this.querySelector('[data-action=\"retry\"]');\n    const okBtn = this.querySelector('[data-action=\"ok\"]');\n\n    if (retryBtn) {\n      retryBtn.removeEventListener(\"click\", this._boundRetry);\n    }\n    if (okBtn) {\n      okBtn.removeEventListener(\"click\", this._boundOk);\n    }\n  }\n\n  setErrorMessage(message) {\n    this._errorMessage = message;\n    const messageEl = this.querySelector('[data-role=\"error-message\"]');\n    if (messageEl && message) {\n      messageEl.textContent = message;\n    }\n  }\n\n  handleRetry(event) {\n    console.log(\"[UploadErrorView] Retry button clicked\");\n    event.preventDefault();\n\n    // Dispatch retry event to bubble up\n    this.dispatchEvent(\n      new CustomEvent(\"retry\", {\n        bubbles: true,\n      }),\n    );\n    console.log(\"[UploadErrorView] Retry event dispatched\");\n  }\n\n  handleOk(event) {\n    console.log(\"[UploadErrorView] OK button clicked\");\n    event.preventDefault();\n\n    // Dispatch dismiss event to bubble up\n    this.dispatchEvent(\n      new CustomEvent(\"error-dismiss\", {\n        bubbles: true,\n      }),\n    );\n    console.log(\"[UploadErrorView] Error-dismiss event dispatched\");\n  }\n}\n\ncustomElements.define(\"upload-error-view\", UploadErrorView);\n", "import { bytes, timeLeft } from \"../utils.mjs\";\nimport \"./upload-area-empty.mjs\";\nimport \"./upload-area-list.mjs\";\nimport \"./upload-area-uploading.mjs\";\nimport \"./upload-area-complete.mjs\";\nimport \"./upload-area-error.mjs\";\n\nconst VIEW_TAGS = {\n  empty: \"upload-empty-view\",\n  list: \"upload-list-view\",\n  uploading: \"upload-uploading-view\",\n  complete: \"upload-complete-view\",\n  error: \"upload-error-view\",\n};\n\nclass UploadAreaElement extends HTMLElement {\n  constructor() {\n    super();\n    this._currentView = null;\n    this._currentViewKey = null;\n    this._app = null;\n    this._errorMessage = null;\n    this._isComplete = false;\n    this._isError = false;\n    this._uploadedFile = null;\n    this._boundPaste = this.handlePaste.bind(this);\n  }\n\n  connectedCallback() {\n    if (!this._app) {\n      this._app = this.closest(\"go-send\");\n    }\n    window.addEventListener(\"paste\", this._boundPaste);\n    this.refresh();\n  }\n\n  disconnectedCallback() {\n    window.removeEventListener(\"paste\", this._boundPaste);\n    this._currentView = null;\n  }\n\n  refresh() {\n    const state = this._getAppState();\n    if (!state) {\n      return;\n    }\n\n    // If we're in error state, stay there until explicitly cleared\n    if (this._isError) {\n      this._ensureView(\"error\");\n      this._configureErrorView();\n      return;\n    }\n\n    // If we're in complete state, stay there until explicitly cleared\n    if (this._isComplete) {\n      this._ensureView(\"complete\");\n      this._configureCompleteView();\n      return;\n    }\n\n    const archive = state.archive;\n    const isUploading = Boolean(state.uploading && state.transfer);\n    const hasFiles = Boolean(archive && archive.files && archive.files.length > 0);\n\n    let desiredView = \"empty\";\n    if (isUploading) {\n      desiredView = \"uploading\";\n    } else if (hasFiles) {\n      desiredView = \"list\";\n    }\n\n    this._ensureView(desiredView);\n\n    switch (desiredView) {\n      case \"empty\":\n        this._configureEmptyView(state);\n        break;\n      case \"list\":\n        this._configureListView(state);\n        break;\n      case \"uploading\":\n        this._configureUploadingView(state);\n        break;\n      default:\n        break;\n    }\n\n    this._applyErrorMessage();\n  }\n\n  setUploadButtonEnabled(enabled) {\n    if (this._currentViewKey === \"list\" && this._currentView && typeof this._currentView.setUploadEnabled === \"function\") {\n      this._currentView.setUploadEnabled(enabled);\n    }\n  }\n\n  updateProgress(ratio, bytesUploaded, totalBytes) {\n    if (this._currentViewKey === \"uploading\" && this._currentView && typeof this._currentView.updateProgress === \"function\") {\n      this._currentView.updateProgress(ratio, bytesUploaded, totalBytes);\n    } else if (this._currentViewKey === \"list\" && this._currentView && typeof this._currentView.updateProgress === \"function\") {\n      this._currentView.updateProgress(ratio, bytesUploaded, totalBytes);\n    }\n  }\n\n  updateProgressText(text) {\n    if (this._currentViewKey === \"uploading\" && this._currentView && typeof this._currentView.setStatus === \"function\") {\n      this._currentView.setStatus(text);\n    } else if (this._currentViewKey === \"list\" && this._currentView && typeof this._currentView.updateProgressText === \"function\") {\n      this._currentView.updateProgressText(text);\n    }\n  }\n\n  ensureView(viewKey) {\n    this._ensureView(viewKey);\n  }\n\n  setUploadedFile(ownedFile) {\n    this._isComplete = true;\n    this._uploadedFile = ownedFile;\n\n    if (this._currentViewKey === \"complete\" && this._currentView && typeof this._currentView.setUploadedFile === \"function\") {\n      this._currentView.setUploadedFile(ownedFile);\n    }\n  }\n\n  clearComplete() {\n    this._isComplete = false;\n    this._uploadedFile = null;\n    this.refresh();\n  }\n\n  showErrorView(message) {\n    console.log(\"[UploadArea] showErrorView() called with message:\", message);\n    this._errorMessage = message;\n    this._isComplete = false;\n    this._isError = true;\n    this._ensureView(\"error\");\n    this._configureErrorView();\n    console.log(\"[UploadArea] Error view displayed\");\n  }\n\n  clearError() {\n    console.log(\"[UploadArea] clearError() called\");\n    this._isError = false;\n    this._errorMessage = null;\n    console.log(\"[UploadArea] Error state cleared, calling refresh()\");\n    this.refresh();\n  }\n\n  _configureErrorView() {\n    const view = this._currentView;\n    if (!view || typeof view.setErrorMessage !== \"function\") {\n      return;\n    }\n\n    if (this._errorMessage) {\n      view.setErrorMessage(this._errorMessage);\n    }\n  }\n\n  _ensureView(viewKey) {\n    if (this._currentViewKey === viewKey && this._currentView && this._currentView.parentElement === this) {\n      return;\n    }\n\n    this.innerHTML = \"\";\n    const tagName = VIEW_TAGS[viewKey] || VIEW_TAGS.empty;\n    const view = document.createElement(tagName);\n    this.appendChild(view);\n    this._currentView = view;\n    this._currentViewKey = viewKey;\n\n    this._applyErrorMessage();\n  }\n\n  _configureEmptyView(state) {\n    const view = this._currentView;\n    if (!view || typeof view.setConfig !== \"function\") {\n      return;\n    }\n\n    const limits = state.LIMITS || {};\n    const sizeLabel = bytes(limits.MAX_FILE_SIZE || 0);\n    const orClickText = this._translate(\"orClickWithSize\", `or click to select files (max ${sizeLabel})`, { size: sizeLabel }, state);\n    const addFilesLabel = this._translate(\"addFilesButton\", \"Select files\", null, state);\n    const noticeHTML = state.WEB_UI?.UPLOAD_AREA_NOTICE_HTML || \"\";\n\n    view.setConfig({ orClickText, addFilesLabel, noticeHTML });\n  }\n\n  _configureListView(state) {\n    const view = this._currentView;\n    if (!view || typeof view.setState !== \"function\") {\n      return;\n    }\n\n    const archive = state.archive;\n    const limits = state.LIMITS || {};\n    const defaults = state.DEFAULTS || {};\n\n    view.setState({\n      files: archive?.files || [],\n      totalSize: archive?.size || 0,\n      maxFiles: limits.MAX_FILES_PER_ARCHIVE || 0,\n      limits,\n      defaults,\n      translate: state.translate,\n      timeLimit: archive?.timeLimit ?? null,\n      downloadLimit: archive?.dlimit ?? null,\n      password: archive?.password ?? \"\",\n    });\n  }\n\n  showError(message) {\n    this._errorMessage = message || null;\n    this._applyErrorMessage();\n  }\n\n  _applyErrorMessage() {\n    if (this._currentView && typeof this._currentView.setError === \"function\") {\n      this._currentView.setError(this._errorMessage);\n    }\n  }\n\n  _configureUploadingView(state) {\n    const view = this._currentView;\n    if (!view) {\n      return;\n    }\n\n    const archive = state.archive;\n\n    // Set file name and size\n    if (archive && typeof view.setFileInfo === \"function\") {\n      view.setFileInfo(archive.name || \"File\", archive.size || 0);\n    }\n\n    // Set expiry info\n    if (archive && typeof view.setExpiryInfo === \"function\") {\n      const expiresAt = Date.now() + 500 + (archive.timeLimit || 0) * 1000;\n      const downloadsLeft = archive.dlimit || 1;\n      const timeLeftMs = expiresAt - Date.now();\n      const timeLeftData = timeLeft(timeLeftMs);\n\n      // Get translator\n      const translate = window.translate || ((key) => key);\n\n      // Build expiry text\n      const downloadCountText = translate(\"downloadCount\", { num: downloadsLeft });\n      const timeText = translate(timeLeftData.id, timeLeftData);\n      const expiryText = translate(\"archiveExpiryInfo\", {\n        downloadCount: downloadCountText,\n        timespan: timeText,\n      });\n\n      view.setExpiryInfo(expiryText);\n    }\n\n    // Update progress if transfer is active\n    const transfer = state.transfer;\n    if (transfer && typeof view.updateProgress === \"function\") {\n      const ratio = transfer.progressRatio || 0;\n      const [uploadedBytes = 0, totalBytes = 0] = transfer.progress || [];\n      view.updateProgress(ratio, uploadedBytes, totalBytes);\n    }\n  }\n\n  _configureCompleteView() {\n    const view = this._currentView;\n    if (!view || !this._uploadedFile) {\n      return;\n    }\n\n    if (typeof view.setUploadedFile === \"function\") {\n      view.setUploadedFile(this._uploadedFile);\n    }\n  }\n\n  _getAppState() {\n    if (!this._app || !this._app.state) {\n      this._app = this.closest(\"go-send\");\n    }\n    return this._app?.state || null;\n  }\n\n  _translate(key, fallback, params, state) {\n    const translator = state?.translate || window.translate;\n    if (typeof translator === \"function\") {\n      try {\n        const value = translator(key, params);\n        if (value) {\n          return value;\n        }\n      } catch (err) {\n        // ignore missing key\n      }\n    }\n    return fallback;\n  }\n\n  async handlePaste(event) {\n    const state = this._getAppState();\n    if (!state) {\n      return;\n    }\n\n    // Don't handle paste if uploading or if we're in complete state\n    if (state.uploading || this._isComplete) {\n      return;\n    }\n\n    // Don't handle paste if target is an input field\n    const targetType = event.target?.type;\n    if ([\"password\", \"text\", \"email\", \"textarea\"].includes(targetType)) {\n      return;\n    }\n\n    // Don't handle paste if target is a textarea element\n    if (event.target?.tagName === \"TEXTAREA\") {\n      return;\n    }\n\n    const items = Array.from(event.clipboardData?.items || []);\n    const transferFiles = items.filter(item => item.kind === \"file\");\n    const strings = items.filter(item => item.kind === \"string\");\n\n    if (transferFiles.length > 0) {\n      // Handle pasted files\n      const promises = transferFiles.map(async (item, i) => {\n        const blob = item.getAsFile();\n        if (!blob) {\n          return null;\n        }\n\n        // Try to get filename from associated string\n        const name = await this._getStringFromItem(strings[i]);\n        const file = new File([blob], name || blob.name || \"file\", { type: blob.type });\n        return file;\n      });\n\n      const files = (await Promise.all(promises)).filter(f => !!f);\n      if (files.length > 0) {\n        event.preventDefault();\n        this.dispatchEvent(\n          new CustomEvent(\"addfiles\", {\n            bubbles: true,\n            detail: { files },\n          }),\n        );\n      }\n    } else if (strings.length > 0) {\n      // Handle pasted text - create a text file\n      const textContent = await this._getStringFromItem(strings[0]);\n      if (textContent) {\n        event.preventDefault();\n        const file = new File([textContent], \"pasted.txt\", { type: \"text/plain\" });\n        this.dispatchEvent(\n          new CustomEvent(\"addfiles\", {\n            bubbles: true,\n            detail: { files: [file] },\n          }),\n        );\n      }\n    }\n  }\n\n  _getStringFromItem(item) {\n    if (!item) {\n      return Promise.resolve(\"\");\n    }\n    return new Promise(resolve => {\n      item.getAsString(resolve);\n    });\n  }\n}\n\ncustomElements.define(\"upload-area\", UploadAreaElement);\n"],
  "mappings": "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",
  "names": ["_a"]
}
