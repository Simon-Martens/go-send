import{a as de}from"./chunks/chunk.E3IN6YWE.js";function C(r){let e="";for(let n=0;n<r.length;n+=32768)e+=String.fromCharCode(...r.subarray(n,n+32768));return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function A(){return document.querySelector("html").lang}function V(r){return/^[0-9a-fA-F]{10,16}$/.test(r)}var Ct=!!(typeof Intl=="object"&&Intl&&typeof Intl.NumberFormat=="function"&&typeof navigator=="object");function me(){try{return/firefox/i.test(navigator.userAgent)?"firefox":/edge/i.test(navigator.userAgent)?"edge":/edg/i.test(navigator.userAgent)?"edgium":/trident/i.test(navigator.userAgent)?"ie":/chrome/i.test(navigator.userAgent)?"chrome":/safari/i.test(navigator.userAgent)?"safari":/send android/i.test(navigator.userAgent)?"android-app":"other"}catch{return"unknown"}}var Mt=1024*64;var Ye=function(){throw new Error("uninitialized translate function. call setTranslate first")};function pe(r){Ye=r}async function Qe(){try{let r=await crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"]);return await crypto.subtle.exportKey("raw",r),await crypto.subtle.encrypt({name:"AES-GCM",iv:crypto.getRandomValues(new Uint8Array(12)),tagLength:128},r,new ArrayBuffer(8)),await crypto.subtle.importKey("raw",crypto.getRandomValues(new Uint8Array(16)),"PBKDF2",!1,["deriveKey"]),await crypto.subtle.importKey("raw",crypto.getRandomValues(new Uint8Array(16)),"HKDF",!1,["deriveKey"]),await crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveBits"]),!0}catch{return!1}}function et(){try{return new ReadableStream({pull(){}}),!0}catch{return!1}}async function Z(){let r=me(),e=/mobi|android/i.test(navigator.userAgent),t="serviceWorker"in navigator&&r!=="edge",n=await Qe(),i=et(),o=e&&typeof navigator.share=="function"&&A().startsWith("en"),u=window.matchMedia("(display-mode: standalone)").matches||navigator.standalone;return{crypto:n,serviceWorker:t,streamUpload:i,streamDownload:i&&t&&r!=="safari"&&!(r==="firefox"&&e),multifile:i,share:o,standalone:u}}function M(r){let e="";for(let n=0;n<r.length;n+=32768)e+=String.fromCharCode(...r.subarray(n,n+32768));return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function x(r){let e=r.replace(/-/g,"+").replace(/_/g,"/")+"===".slice((r.length+3)%4),t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function L(r){let e=r.reduce((i,o)=>i+o.length,0),t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}function J(r,e){return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(e,!1)}function j(r,e,t){new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(e,t,!1)}function we(r,e){return r[e]}function ye(r,e,t){r[e]=t}function v(r,e={},t){let n=r.getReader(),i=e||{};return new ReadableStream({async start(o){i.start&&await i.start(o)},async pull(o){for(;;){let{value:u,done:f}=await n.read();if(f){i.flush&&await i.flush(o),n.releaseLock(),o.close();return}if(!i.transform){o.enqueue(u);return}let p=!1,W={enqueue(b){p=!0,o.enqueue(b)}};if(await i.transform(u,W),p)return}},cancel(o){n.cancel(o),i.cancel&&i.cancel(o),t&&t(o)}})}var X=class{constructor(e,t){this.blob=e,this.index=0,this.chunkSize=t||1024*64}pull(e){return new Promise((t,n)=>{let i=this.blob.size-this.index;if(i<=0)return e.close(),t();let o=Math.min(this.chunkSize,i),u=this.blob.slice(this.index,this.index+o),f=new FileReader;f.onload=()=>{e.enqueue(new Uint8Array(f.result)),t()},f.onerror=n,f.readAsArrayBuffer(u),this.index+=o})}};function ge(r,e){return new ReadableStream(new X(r,e))}var Y=class{constructor(e){this.streams=e,this.index=0,this.reader=null,this.nextReader()}nextReader(){let e=this.streams[this.index++];this.reader=e&&e.getReader()}async pull(e){if(!this.reader)return e.close();let t=await this.reader.read();if(t.done)return this.nextReader(),this.pull(e);e.enqueue(t.value)}};function Ee(r){return new ReadableStream(new Y(r))}var tt=12,be=16,R=16,Q="encrypt",Ae="decrypt",ee=1024*64,Se=new TextEncoder;function rt(r){let e=new Uint8Array(r);return crypto.getRandomValues(e),e.buffer}var O=class{constructor(e,t,n,i){this.mode=e,this.prevChunk,this.seq=0,this.firstchunk=!0,this.rs=n,this.ikm=t.buffer,this.salt=i}async generateKey(){let e=await crypto.subtle.importKey("raw",this.ikm,"HKDF",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"HKDF",salt:this.salt,info:Se.encode("Content-Encoding: aes128gcm\0"),hash:"SHA-256"},e,{name:"AES-GCM",length:128},!0,["encrypt","decrypt"])}async generateNonceBase(){let e=await crypto.subtle.importKey("raw",this.ikm,"HKDF",!1,["deriveKey"]),t=await crypto.subtle.exportKey("raw",await crypto.subtle.deriveKey({name:"HKDF",salt:this.salt,info:Se.encode("Content-Encoding: nonce\0"),hash:"SHA-256"},e,{name:"AES-GCM",length:128},!0,["encrypt","decrypt"]));return new Uint8Array(t.slice(0,tt))}generateNonce(e){if(e>4294967295)throw new Error("record sequence number exceeds limit");let t=new Uint8Array(this.nonceBase),i=(J(t,t.length-4)^e)>>>0;return j(t,t.length-4,i),t}pad(e,t){let n=e.length;if(n+be>=this.rs)throw new Error("data too large for record size");if(t){let i=new Uint8Array(1);return i[0]=2,L([e,i])}else{let i=new Uint8Array(this.rs-n-be);return i[0]=1,L([e,i])}}unpad(e,t){for(let n=e.length-1;n>=0;n--)if(e[n]){if(t){if(e[n]!==2)throw new Error("delimiter of final record is not 2")}else if(e[n]!==1)throw new Error("delimiter of not final record is not 1");return e.slice(0,n)}throw new Error("no delimiter found")}createHeader(){let e=new Uint8Array(5);return j(e,0,this.rs),ye(e,4,0),L([new Uint8Array(this.salt),e])}readHeader(e){if(e.length<21)throw new Error("chunk too small for reading header");let t={};t.salt=e.buffer.slice(0,R),t.rs=J(e,R);let n=we(e,R+4);return t.length=n+R+5,t}async encryptRecord(e,t,n){let i=this.generateNonce(t),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},this.key,this.pad(e,n));return new Uint8Array(o)}async decryptRecord(e,t,n){let i=this.generateNonce(t),o=await crypto.subtle.decrypt({name:"AES-GCM",iv:i,tagLength:128},this.key,e);return this.unpad(new Uint8Array(o),n)}async start(e){if(this.mode===Q)this.key=await this.generateKey(),this.nonceBase=await this.generateNonceBase(),e.enqueue(this.createHeader());else if(this.mode!==Ae)throw new Error("mode must be either encrypt or decrypt")}async transformPrevChunk(e,t){if(this.mode===Q)t.enqueue(await this.encryptRecord(this.prevChunk,this.seq,e)),this.seq++;else{if(this.seq===0){let n=this.readHeader(this.prevChunk);this.salt=n.salt,this.rs=n.rs,this.key=await this.generateKey(),this.nonceBase=await this.generateNonceBase()}else t.enqueue(await this.decryptRecord(this.prevChunk,this.seq-1,e));this.seq++}}async transform(e,t){this.firstchunk||await this.transformPrevChunk(!1,t),this.firstchunk=!1,this.prevChunk=new Uint8Array(e.buffer)}async flush(e){this.prevChunk&&await this.transformPrevChunk(!0,e)}},P=class{constructor(e,t){this.mode=t,this.rs=e,this.chunkSize=t===Q?e-17:21,this.partialChunk=new Uint8Array(this.chunkSize),this.offset=0}send(e,t){t.enqueue(e),this.chunkSize===21&&this.mode===Ae&&(this.chunkSize=this.rs),this.partialChunk=new Uint8Array(this.chunkSize),this.offset=0}transform(e,t){let n=0;if(this.offset>0){let i=Math.min(e.byteLength,this.chunkSize-this.offset);this.partialChunk.set(e.slice(0,i),this.offset),this.offset+=i,n+=i,this.offset===this.chunkSize&&this.send(this.partialChunk,t)}for(;n<e.byteLength;){let i=e.byteLength-n;if(i>=this.chunkSize){let o=e.slice(n,n+this.chunkSize);n+=this.chunkSize,this.send(o,t)}else{let o=e.slice(n,n+i);n+=o.byteLength,this.partialChunk.set(o),this.offset=o.byteLength}}}flush(e){this.offset>0&&e.enqueue(this.partialChunk.slice(0,this.offset))}};function xe(r,e,t=ee,n=rt(R)){let i="encrypt",o=v(r,new P(t,i));return v(o,new O(i,e,t,n))}function ve(r,e,t=ee){let n="decrypt",i=v(r,new P(t,n));return v(i,new O(n,e,t))}var T=new TextEncoder,nt=new TextDecoder,_=class{constructor(e,t){this._nonce=t||"yRCdyQ1EMSA3mo4rqSkuNQ==",e?this.rawSecret=x(e):this.rawSecret=crypto.getRandomValues(new Uint8Array(16)),this.secretKeyPromise=crypto.subtle.importKey("raw",this.rawSecret,"HKDF",!1,["deriveKey"]),this.metaKeyPromise=this.secretKeyPromise.then(function(n){return crypto.subtle.deriveKey({name:"HKDF",salt:new Uint8Array,info:T.encode("metadata"),hash:"SHA-256"},n,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])}),this.authKeyPromise=this.secretKeyPromise.then(function(n){return crypto.subtle.deriveKey({name:"HKDF",salt:new Uint8Array,info:T.encode("authentication"),hash:"SHA-256"},n,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign"])})}get nonce(){return this._nonce}set nonce(e){e&&e!==this._nonce&&(this._nonce=e)}setPassword(e,t){this.authKeyPromise=crypto.subtle.importKey("raw",T.encode(e),{name:"PBKDF2"},!1,["deriveKey"]).then(n=>crypto.subtle.deriveKey({name:"PBKDF2",salt:T.encode(t),iterations:100,hash:"SHA-256"},n,{name:"HMAC",hash:"SHA-256"},!0,["sign"]))}setAuthKey(e){this.authKeyPromise=crypto.subtle.importKey("raw",x(e),{name:"HMAC",hash:"SHA-256"},!0,["sign"])}async authKeyB64(){let e=await this.authKeyPromise,t=await crypto.subtle.exportKey("raw",e);return M(new Uint8Array(t))}async authHeader(){let e=await this.authKeyPromise,t=await crypto.subtle.sign({name:"HMAC"},e,x(this.nonce));return`send-v1 ${M(new Uint8Array(t))}`}async encryptMetadata(e){let t=await this.metaKeyPromise;return await crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(12),tagLength:128},t,T.encode(JSON.stringify({name:e.name,size:e.size,type:e.type||"application/octet-stream",manifest:e.manifest||{}})))}encryptStream(e){return xe(e,this.rawSecret)}decryptStream(e){return ve(e,this.rawSecret)}async decryptMetadata(e){let t=await this.metaKeyPromise,n=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12),tagLength:128},t,e);return JSON.parse(nt.decode(n))}};var te=null;try{te=localStorage.getItem("wssURL")}catch{}te||(te="wss://send.firefox.com/api/ws");var it="";function D(r){return it+r}function F(r){let e={"Content-Type":"application/json"};return{method:"POST",headers:new Headers(e),body:JSON.stringify(r)}}async function Re(r,e){return(await fetch(D(`/api/delete/${r}`),F({owner_token:e}))).ok}async function Te(r,e,t){return(await fetch(D(`/api/params/${r}`),F({owner_token:e,dlimit:t.dlimit}))).ok}async function _e(r,e){let t=await fetch(D(`/api/info/${r}`),F({owner_token:e}));if(t.ok)return await t.json();throw new Error(t.status)}async function ke(r,e,t){let n=await t.authKeyB64();return(await fetch(D(`/api/password/${r}`),F({owner_token:e,auth:n}))).ok}var g=class{constructor(e){if(!e.manifest)throw new Error("invalid file object");this.id=e.id,this.url=e.url,this.name=e.name,this.size=e.size,this.manifest=e.manifest,this.time=e.time,this.speed=e.speed,this.createdAt=e.createdAt,this.expiresAt=e.expiresAt,this.ownerToken=e.ownerToken,this.dlimit=e.dlimit||1,this.dtotal=e.dtotal||0,this.keychain=new _(e.secretKey,e.nonce),this._hasPassword=!!e.hasPassword,this.timeLimit=e.timeLimit}get hasPassword(){return!!this._hasPassword}get expired(){return this.dlimit===this.dtotal||Date.now()>this.expiresAt}async setPassword(e){try{return this.password=e,this._hasPassword=!0,this.keychain.setPassword(e,this.url),await ke(this.id,this.ownerToken,this.keychain)}catch(t){throw this.password=null,this._hasPassword=!1,t}}del(){return Re(this.id,this.ownerToken)}changeLimit(e){return this.dlimit!==e?(this.dlimit=e,Te(this.id,this.ownerToken,{dlimit:e})):Promise.resolve(!0)}async updateDownloadCount(){let e=this.dtotal,t=this.dlimit;try{let n=await _e(this.id,this.ownerToken);this.dtotal=n.dtotal,this.dlimit=n.dlimit}catch(n){n.message==="404"&&(this.dtotal=this.dlimit)}return e!==this.dtotal||t!==this.dlimit}toJSON(){return{id:this.id,url:this.url,name:this.name,size:this.size,manifest:this.manifest,time:this.time,speed:this.speed,createdAt:this.createdAt,expiresAt:this.expiresAt,secretKey:C(this.keychain.rawSecret),ownerToken:this.ownerToken,dlimit:this.dlimit,dtotal:this.dtotal,hasPassword:this.hasPassword,timeLimit:this.timeLimit}}};var K=class{constructor(){this.items=new Map}get length(){return this.items.size}getItem(e){return this.items.get(e)}setItem(e,t){return this.items.set(e,t)}removeItem(e){return this.items.delete(e)}key(e){return this.items.keys()[e]}},re=class{constructor(){try{this.engine=localStorage||new K}catch{this.engine=new K}this._files=this.loadFiles()}loadFiles(){let e=new Map;for(let t=0;t<this.engine.length;t++){let n=this.engine.key(t);if(V(n))try{let i=new g(JSON.parse(this.engine.getItem(n)));i.id||(i.id=i.fileId),e.set(i.id,i)}catch{this.engine.removeItem(n)}}return e}get id(){let e=this.engine.getItem("device_id");return e||(e=C(crypto.getRandomValues(new Uint8Array(16))),this.engine.setItem("device_id",e)),e}get totalDownloads(){return Number(this.engine.getItem("totalDownloads"))}set totalDownloads(e){this.engine.setItem("totalDownloads",e)}get totalUploads(){return Number(this.engine.getItem("totalUploads"))}set totalUploads(e){this.engine.setItem("totalUploads",e)}get referrer(){return this.engine.getItem("referrer")}set referrer(e){this.engine.setItem("referrer",e)}get enrolled(){return JSON.parse(this.engine.getItem("ab_experiments")||"{}")}enroll(e,t){let n={};n[e]=t,this.engine.setItem("ab_experiments",JSON.stringify(n))}get files(){return Array.from(this._files.values()).sort((e,t)=>e.createdAt-t.createdAt)}getFileById(e){return this._files.get(e)}get(e){return this.engine.getItem(e)}set(e,t){return this.engine.setItem(e,t)}remove(e){V(e)&&this._files.delete(e),this.engine.removeItem(e)}addFile(e){this._files.set(e.id,e),this.writeFile(e)}writeFile(e){this.engine.setItem(e.id,JSON.stringify(e))}writeFiles(){this._files.forEach(e=>this.writeFile(e))}clearLocalFiles(){this._files.forEach(e=>this.engine.removeItem(e.id)),this._files=new Map}async merge(e=[]){let t=!1,n=!1,i=!1;for(let u of e)this.getFileById(u.id)||(this.addFile(new g(u)),t=!0);let o=this.files.slice();for(let u of o){let f=await u.updateDownloadCount();f&&await this.writeFile(u),i=i||f,n=n||u.expired,u.expired?this.remove(u.id):e.find(p=>p.id===u.id)||(n=!0)}return{incoming:t,outgoing:n,downloadCount:i}}},Ie=new re;var w=class{constructor(e){this.value=e}valueOf(){return this.value}},c=class extends w{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}},h=class extends w{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}},m=class extends w{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}};var Ne=100,st="\u2068",ot="\u2069";function at(r,e,t){if(t===e||t instanceof h&&e instanceof h&&t.value===e.value)return!0;if(e instanceof h&&typeof t=="string"){let n=r.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(t===n)return!0}return!1}function Ue(r,e,t){return e[t]?E(r,e[t].value):(r.reportError(new RangeError("No default")),new c)}function ne(r,e){let t=[],n=Object.create(null);for(let i of e)i.type==="narg"?n[i.name]=k(r,i.value):t.push(k(r,i));return{positional:t,named:n}}function k(r,e){switch(e.type){case"str":return e.value;case"num":return new h(e.value,{minimumFractionDigits:e.precision});case"var":return ut(r,e);case"mesg":return ct(r,e);case"term":return lt(r,e);case"func":return ft(r,e);case"select":return ht(r,e);default:return new c}}function ut(r,{name:e}){let t;if(r.params)if(Object.prototype.hasOwnProperty.call(r.params,e))t=r.params[e];else return new c(`$${e}`);else if(r.args&&Object.prototype.hasOwnProperty.call(r.args,e))t=r.args[e];else return r.reportError(new ReferenceError(`Unknown variable: $${e}`)),new c(`$${e}`);if(t instanceof w)return t;switch(typeof t){case"string":return t;case"number":return new h(t);case"object":if(t instanceof Date)return new m(t.getTime());default:return r.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new c(`$${e}`)}}function ct(r,{name:e,attr:t}){let n=r.bundle._messages.get(e);if(!n)return r.reportError(new ReferenceError(`Unknown message: ${e}`)),new c(e);if(t){let i=n.attributes[t];return i?E(r,i):(r.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new c(`${e}.${t}`))}return n.value?E(r,n.value):(r.reportError(new ReferenceError(`No value: ${e}`)),new c(e))}function lt(r,{name:e,attr:t,args:n}){let i=`-${e}`,o=r.bundle._terms.get(i);if(!o)return r.reportError(new ReferenceError(`Unknown term: ${i}`)),new c(i);if(t){let f=o.attributes[t];if(f){r.params=ne(r,n).named;let p=E(r,f);return r.params=null,p}return r.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new c(`${i}.${t}`)}r.params=ne(r,n).named;let u=E(r,o.value);return r.params=null,u}function ft(r,{name:e,args:t}){let n=r.bundle._functions[e];if(!n)return r.reportError(new ReferenceError(`Unknown function: ${e}()`)),new c(`${e}()`);if(typeof n!="function")return r.reportError(new TypeError(`Function ${e}() is not callable`)),new c(`${e}()`);try{let i=ne(r,t);return n(i.positional,i.named)}catch(i){return r.reportError(i),new c(`${e}()`)}}function ht(r,{selector:e,variants:t,star:n}){let i=k(r,e);if(i instanceof c)return Ue(r,t,n);for(let o of t){let u=k(r,o.key);if(at(r,i,u))return E(r,o.value)}return Ue(r,t,n)}function ie(r,e){if(r.dirty.has(e))return r.reportError(new RangeError("Cyclic reference")),new c;r.dirty.add(e);let t=[],n=r.bundle._useIsolating&&e.length>1;for(let i of e){if(typeof i=="string"){t.push(r.bundle._transform(i));continue}if(r.placeables++,r.placeables>Ne)throw r.dirty.delete(e),new RangeError(`Too many placeables expanded: ${r.placeables}, max allowed is ${Ne}`);n&&t.push(st),t.push(k(r,i).toString(r)),n&&t.push(ot)}return r.dirty.delete(e),t.join("")}function E(r,e){return typeof e=="string"?r.bundle._transform(e):ie(r,e)}var $=class{constructor(e,t,n){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=n}reportError(e){if(!this.errors||!(e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let n=this.bundle._intls.get(e);n||(n={},this.bundle._intls.set(e,n));let i=JSON.stringify(t);return n[i]||(n[i]=new e(this.bundle.locales,t)),n[i]}};function z(r,e){let t=Object.create(null);for(let[n,i]of Object.entries(r))e.includes(n)&&(t[n]=i.valueOf());return t}var Ce=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Le(r,e){let t=r[0];if(t instanceof c)return new c(`NUMBER(${t.valueOf()})`);if(t instanceof h)return new h(t.valueOf(),{...t.opts,...z(e,Ce)});if(t instanceof m)return new h(t.valueOf(),{...z(e,Ce)});throw new TypeError("Invalid argument to NUMBER")}var Me=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function Oe(r,e){let t=r[0];if(t instanceof c)return new c(`DATETIME(${t.valueOf()})`);if(t instanceof m)return new m(t.valueOf(),{...t.opts,...z(e,Me)});if(t instanceof h)return new m(t.valueOf(),{...z(e,Me)});throw new TypeError("Invalid argument to DATETIME")}var Pe=new Map;function De(r){let e=Array.isArray(r)?r.join(" "):r,t=Pe.get(e);return t===void 0&&(t=new Map,Pe.set(e,t)),t}var I=class{constructor(e,{functions:t,useIsolating:n=!0,transform:i=o=>o}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:Le,DATETIME:Oe,...t},this._useIsolating=n,this._transform=i,this._intls=De(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){let n=[];for(let i=0;i<e.body.length;i++){let o=e.body[i];if(o.id.startsWith("-")){if(t===!1&&this._terms.has(o.id)){n.push(new Error(`Attempt to override an existing term: "${o.id}"`));continue}this._terms.set(o.id,o)}else{if(t===!1&&this._messages.has(o.id)){n.push(new Error(`Attempt to override an existing message: "${o.id}"`));continue}this._messages.set(o.id,o)}}return n}formatPattern(e,t=null,n=null){if(typeof e=="string")return this._transform(e);let i=new $(this,n,t);try{return ie(i,e).toString(i)}catch(o){if(i.errors&&o instanceof Error)return i.errors.push(o),new c().toString(i);throw o}}};var se=/^(-?[a-zA-Z][\w-]*) *= */gm,Fe=/\.([a-zA-Z][\w-]*) *= */y,dt=/\*?\[/y,oe=/(-?[0-9]+(?:\.([0-9]+))?)/y,mt=/([a-zA-Z][\w-]*)/y,Ke=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,pt=/^[A-Z][A-Z0-9_-]*$/,B=/([^{}\n\r]+)/y,wt=/([^\\"\n\r]*)/y,$e=/\\([\\"])/y,ze=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,yt=/^\n+/,Be=/ +$/,gt=/ *\r?\n/g,Et=/( *)$/,bt=/{\s*/y,He=/\s*}/y,St=/\[\s*/y,At=/\s*] */y,xt=/\s*\(\s*/y,vt=/\s*->\s*/y,Rt=/\s*:\s*/y,Tt=/\s*,?\s*/y,_t=/\s+/y,N=class{constructor(e){this.body=[],se.lastIndex=0;let t=0;for(;;){let s=se.exec(e);if(s===null)break;t=se.lastIndex;try{this.body.push(p(s[1]))}catch(a){if(a instanceof SyntaxError)continue;throw a}}function n(s){return s.lastIndex=t,s.test(e)}function i(s,a){if(e[t]===s)return t++,!0;if(a)throw new a(`Expected ${s}`);return!1}function o(s,a){if(n(s))return t=s.lastIndex,!0;if(a)throw new a(`Expected ${s.toString()}`);return!1}function u(s){s.lastIndex=t;let a=s.exec(e);if(a===null)throw new SyntaxError(`Expected ${s.toString()}`);return t=s.lastIndex,a}function f(s){return u(s)[1]}function p(s){let a=b(),l=W();if(a===null&&Object.keys(l).length===0)throw new SyntaxError("Expected message value or attributes");return{id:s,value:a,attributes:l}}function W(){let s=Object.create(null);for(;n(Fe);){let a=f(Fe),l=b();if(l===null)throw new SyntaxError("Expected attribute value");s[a]=l}return s}function b(){let s;if(n(B)&&(s=f(B)),e[t]==="{"||e[t]==="}")return q(s?[s]:[],1/0);let a=fe();return a?s?q([s,a],a.length):(a.value=G(a.value,yt),q([a],a.length)):s?G(s,Be):null}function q(s=[],a){for(;;){if(n(B)){s.push(f(B));continue}if(e[t]==="{"){s.push(ae());continue}if(e[t]==="}")throw new SyntaxError("Unbalanced closing brace");let d=fe();if(d){s.push(d),a=Math.min(a,d.length);continue}break}let l=s.length-1,y=s[l];typeof y=="string"&&(s[l]=G(y,Be));let S=[];for(let d of s)d instanceof H&&(d=d.value.slice(0,d.value.length-a)),d&&S.push(d);return S}function ae(){o(bt,SyntaxError);let s=ue();if(o(He))return s;if(o(vt)){let a=Ze();return o(He,SyntaxError),{type:"select",selector:s,...a}}throw new SyntaxError("Unclosed placeable")}function ue(){if(e[t]==="{")return ae();if(n(Ke)){let[,s,a,l=null]=u(Ke);if(s==="$")return{type:"var",name:a};if(o(xt)){let y=Ge();if(s==="-")return{type:"term",name:a,attr:l,args:y};if(pt.test(a))return{type:"func",name:a,args:y};throw new SyntaxError("Function names must be all upper-case")}return s==="-"?{type:"term",name:a,attr:l,args:[]}:{type:"mesg",name:a,attr:l}}return ce()}function Ge(){let s=[];for(;;){switch(e[t]){case")":return t++,s;case void 0:throw new SyntaxError("Unclosed argument list")}s.push(Ve()),o(Tt)}}function Ve(){let s=ue();return s.type!=="mesg"?s:o(Rt)?{type:"narg",name:s.name,value:ce()}:s}function Ze(){let s=[],a=0,l;for(;n(dt);){i("*")&&(l=a);let y=Je(),S=b();if(S===null)throw new SyntaxError("Expected variant value");s[a++]={key:y,value:S}}if(a===0)return null;if(l===void 0)throw new SyntaxError("Expected default variant");return{variants:s,star:l}}function Je(){o(St,SyntaxError);let s;return n(oe)?s=le():s={type:"str",value:f(mt)},o(At,SyntaxError),s}function ce(){if(n(oe))return le();if(e[t]==='"')return je();throw new SyntaxError("Invalid expression")}function le(){let[,s,a=""]=u(oe),l=a.length;return{type:"num",value:parseFloat(s),precision:l}}function je(){i('"',SyntaxError);let s="";for(;;){if(s+=f(wt),e[t]==="\\"){s+=Xe();continue}if(i('"'))return{type:"str",value:s};throw new SyntaxError("Unclosed string literal")}}function Xe(){if(n($e))return f($e);if(n(ze)){let[,s,a]=u(ze),l=parseInt(s||a,16);return l<=55295||57344<=l?String.fromCodePoint(l):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function fe(){let s=t;switch(o(_t),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return he(e.slice(s,t))}return e[t-1]===" "?he(e.slice(s,t)):!1}function G(s,a){return s.replace(a,"")}function he(s){let a=s.replace(gt,`
`),l=Et.exec(s)[1].length;return new H(a,l)}}},H=class{constructor(e,t){this.value=e,this.length=t}};var kt=de({"../public/locales/an/send.ftl":()=>import("./chunks/send.SFGF7ZGB.js"),"../public/locales/ar/send.ftl":()=>import("./chunks/send.KCQ532RH.js"),"../public/locales/ast/send.ftl":()=>import("./chunks/send.GOVAPUK5.js"),"../public/locales/az/send.ftl":()=>import("./chunks/send.2IYY46I6.js"),"../public/locales/azz/send.ftl":()=>import("./chunks/send.J635WTDN.js"),"../public/locales/be/send.ftl":()=>import("./chunks/send.HBSGXOFU.js"),"../public/locales/bn/send.ftl":()=>import("./chunks/send.RY44YU73.js"),"../public/locales/br/send.ftl":()=>import("./chunks/send.VKVENWPW.js"),"../public/locales/bs/send.ftl":()=>import("./chunks/send.DU2VG767.js"),"../public/locales/ca/send.ftl":()=>import("./chunks/send.R2DVGPUH.js"),"../public/locales/cak/send.ftl":()=>import("./chunks/send.4TQZL4OQ.js"),"../public/locales/ckb/send.ftl":()=>import("./chunks/send.S2LINM2H.js"),"../public/locales/cs/send.ftl":()=>import("./chunks/send.E6GEX4ZA.js"),"../public/locales/cy/send.ftl":()=>import("./chunks/send.4AXWHG5O.js"),"../public/locales/da/send.ftl":()=>import("./chunks/send.GNTFDS5P.js"),"../public/locales/de/send.ftl":()=>import("./chunks/send.ZP3GID6N.js"),"../public/locales/dsb/send.ftl":()=>import("./chunks/send.UBN2KLWD.js"),"../public/locales/el/send.ftl":()=>import("./chunks/send.XGXOCHEI.js"),"../public/locales/en-CA/send.ftl":()=>import("./chunks/send.H7MCIX6M.js"),"../public/locales/en-GB/send.ftl":()=>import("./chunks/send.I7G4HBKA.js"),"../public/locales/en-US/send.ftl":()=>import("./chunks/send.EX7QV2GM.js"),"../public/locales/es-AR/send.ftl":()=>import("./chunks/send.HMV3IFGV.js"),"../public/locales/es-CL/send.ftl":()=>import("./chunks/send.JTHV5HGP.js"),"../public/locales/es-ES/send.ftl":()=>import("./chunks/send.NJVD7T7B.js"),"../public/locales/es-MX/send.ftl":()=>import("./chunks/send.NG3LFLB3.js"),"../public/locales/et/send.ftl":()=>import("./chunks/send.4IAHNB4D.js"),"../public/locales/eu/send.ftl":()=>import("./chunks/send.JAFHKUFK.js"),"../public/locales/fa/send.ftl":()=>import("./chunks/send.2TQ7WSFV.js"),"../public/locales/fi/send.ftl":()=>import("./chunks/send.NUWD4L4E.js"),"../public/locales/fr/send.ftl":()=>import("./chunks/send.LAFMCD35.js"),"../public/locales/fy-NL/send.ftl":()=>import("./chunks/send.ODEWX3UY.js"),"../public/locales/gn/send.ftl":()=>import("./chunks/send.JJ22MNJP.js"),"../public/locales/gor/send.ftl":()=>import("./chunks/send.4SIXOOR4.js"),"../public/locales/he/send.ftl":()=>import("./chunks/send.BBLMX3AT.js"),"../public/locales/hr/send.ftl":()=>import("./chunks/send.VQ3JT7KO.js"),"../public/locales/hsb/send.ftl":()=>import("./chunks/send.YYS7CUKB.js"),"../public/locales/hu/send.ftl":()=>import("./chunks/send.OIEKFQ3G.js"),"../public/locales/hus/send.ftl":()=>import("./chunks/send.RT2YPBQL.js"),"../public/locales/hy-AM/send.ftl":()=>import("./chunks/send.BK5NA2ZM.js"),"../public/locales/ia/send.ftl":()=>import("./chunks/send.VQAPWC4I.js"),"../public/locales/id/send.ftl":()=>import("./chunks/send.EIATVX54.js"),"../public/locales/ig/send.ftl":()=>import("./chunks/send.FVIID3QK.js"),"../public/locales/it/send.ftl":()=>import("./chunks/send.YFPA25JI.js"),"../public/locales/ixl/send.ftl":()=>import("./chunks/send.ACHZQ77R.js"),"../public/locales/ja/send.ftl":()=>import("./chunks/send.ILPKOWEX.js"),"../public/locales/ka/send.ftl":()=>import("./chunks/send.722RTJFL.js"),"../public/locales/kab/send.ftl":()=>import("./chunks/send.ELLEYFPZ.js"),"../public/locales/ko/send.ftl":()=>import("./chunks/send.S5XNREZS.js"),"../public/locales/lt/send.ftl":()=>import("./chunks/send.O5NVZXAZ.js"),"../public/locales/lus/send.ftl":()=>import("./chunks/send.4L4IBQ7J.js"),"../public/locales/meh/send.ftl":()=>import("./chunks/send.NWKWYSOK.js"),"../public/locales/mix/send.ftl":()=>import("./chunks/send.4QH5ZTCO.js"),"../public/locales/ml/send.ftl":()=>import("./chunks/send.FTAN2GYU.js"),"../public/locales/ms/send.ftl":()=>import("./chunks/send.VCEUTOXW.js"),"../public/locales/nb-NO/send.ftl":()=>import("./chunks/send.QNNJVRZK.js"),"../public/locales/nl/send.ftl":()=>import("./chunks/send.ACVSK74O.js"),"../public/locales/nn-NO/send.ftl":()=>import("./chunks/send.GVIUPW4O.js"),"../public/locales/oc/send.ftl":()=>import("./chunks/send.JKHVXXPD.js"),"../public/locales/pa-IN/send.ftl":()=>import("./chunks/send.NGVNUCT4.js"),"../public/locales/pai/send.ftl":()=>import("./chunks/send.TLYILSQN.js"),"../public/locales/pl/send.ftl":()=>import("./chunks/send.226ZYCAO.js"),"../public/locales/ppl/send.ftl":()=>import("./chunks/send.6EVR3PTJ.js"),"../public/locales/pt-BR/send.ftl":()=>import("./chunks/send.VWIVQAI6.js"),"../public/locales/pt-PT/send.ftl":()=>import("./chunks/send.XSVUL7UC.js"),"../public/locales/quc/send.ftl":()=>import("./chunks/send.VDCBUNYZ.js"),"../public/locales/ro/send.ftl":()=>import("./chunks/send.SYAQQYBI.js"),"../public/locales/ru/send.ftl":()=>import("./chunks/send.NIRZXUGE.js"),"../public/locales/sk/send.ftl":()=>import("./chunks/send.BKELU4KQ.js"),"../public/locales/sl/send.ftl":()=>import("./chunks/send.HIYF76YD.js"),"../public/locales/sn/send.ftl":()=>import("./chunks/send.3QTQG3CT.js"),"../public/locales/sq/send.ftl":()=>import("./chunks/send.CICOFDV6.js"),"../public/locales/sr/send.ftl":()=>import("./chunks/send.U3SOK2CR.js"),"../public/locales/su/send.ftl":()=>import("./chunks/send.L6HGRZH5.js"),"../public/locales/sv-SE/send.ftl":()=>import("./chunks/send.CGVVOTHI.js"),"../public/locales/te/send.ftl":()=>import("./chunks/send.GPWTDQUH.js"),"../public/locales/th/send.ftl":()=>import("./chunks/send.FIZHSYCE.js"),"../public/locales/tl/send.ftl":()=>import("./chunks/send.GOBUZ2AX.js"),"../public/locales/tr/send.ftl":()=>import("./chunks/send.TT7GMTET.js"),"../public/locales/trs/send.ftl":()=>import("./chunks/send.QH6N5VB6.js"),"../public/locales/uk/send.ftl":()=>import("./chunks/send.R5WPUCUZ.js"),"../public/locales/vi/send.ftl":()=>import("./chunks/send.4SLCTNEY.js"),"../public/locales/yo/send.ftl":()=>import("./chunks/send.DQ5YKTTU.js"),"../public/locales/yua/send.ftl":()=>import("./chunks/send.DEPTYSC7.js"),"../public/locales/zgh/send.ftl":()=>import("./chunks/send.CJJEZ5OS.js"),"../public/locales/zh-CN/send.ftl":()=>import("./chunks/send.MLEENUUL.js"),"../public/locales/zh-TW/send.ftl":()=>import("./chunks/send.RPSZ5IOJ.js")});function We(r,e){let t=new I(r,{useIsolating:!1});return t.addResource(new N(e)),t}async function qe(r){let e=[],{default:t}=await import("./chunks/send.EX7QV2GM.js");if(r!=="en-US"){let{default:n}=await kt(`../public/locales/${r}/send.ftl`);e.push(We(r,n))}return e.push(We("en-US",t)),function(n,i){for(let o of e)if(o.hasMessage(n))return o.formatPattern(o.getMessage(n).value,i)}}function It(r,e){for(let t of e)if(r.name===t.name&&r.size===t.size&&r.lastModified===t.lastModified)return!0;return!1}var U=class{constructor(e=[],t=86400,n=1){this.files=Array.from(e),this.defaultTimeLimit=t,this.defaultDownloadLimit=n,this.timeLimit=t,this.dlimit=n,this.password=null}get name(){return this.files.length>1?"Send-Archive.zip":this.files[0].name}get type(){return this.files.length>1?"send-archive":this.files[0].type}get size(){return this.files.reduce((e,t)=>e+t.size,0)}get numFiles(){return this.files.length}get manifest(){return{files:this.files.map(e=>({name:e.name,size:e.size,type:e.type}))}}get stream(){return Ee(this.files.map(e=>ge(e)))}addFiles(e,t,n){if(this.files.length+e.length>n)throw new Error("tooManyFiles");let i=e.filter(u=>u.size>0&&!It(u,this.files)),o=i.reduce((u,f)=>u+f.size,0);if(this.size+o>t)throw new Error("fileTooBig");return this.files=this.files.concat(i),!0}remove(e){let t=this.files.indexOf(e);t>-1&&this.files.splice(t,1)}clear(){this.files=[],this.dlimit=this.defaultDownloadLimit,this.timeLimit=this.defaultTimeLimit,this.password=null}};(async function(){let e=await Z();if(!e.crypto&&window.location.pathname!=="/unsupported/crypto")return window.location.assign("/unsupported/crypto");if(e.serviceWorker)try{await navigator.serviceWorker.register("/serviceWorker.js"),await navigator.serviceWorker.ready}catch(n){console.log("Service Worker registration failed:",n),e.streamDownload=!1}let t=await qe(A());pe(t),window.initialState={LIMITS,DEFAULTS,WEB_UI,PREFS,archive:new U([],DEFAULTS.EXPIRE_SECONDS,DEFAULTS.DOWNLOADS),capabilities:e,translate:t,storage:Ie,transfer:null,fileInfo:null,locale:A()}})();
